(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{27:function(e,t,a){},43:function(e,t){},44:function(e,t,a){},46:function(e,t,a){},51:function(e,t,a){e.exports=a(93)},56:function(e,t,a){},74:function(e,t,a){e.exports=a.p+"static/media/first_logo.4c4417d4.png"},75:function(e,t,a){},80:function(e,t){},81:function(e,t){},82:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){},91:function(e,t,a){},92:function(e,t,a){},93:function(e,t,a){"use strict";a.r(t);var s=a(0),r=a.n(s),n=a(47),l=a.n(n),o=(a(56),a(3)),i=a(4),c=a(6),p=a(5),h=a(24),u=a(8),m=a(2),d=a(10),f=a.n(d),b=a(16),g=a(1),w=a(9),E=a.n(w);var D=function(){return r.a.createElement("img",{src:a(74),style:{height:"25vmin"},alt:"logo"})},y=a(23),v=(a(75),a(19)),N=a(48),x=a(29),k=(a(82),function(e){var t=e.csvData,a=e.fileName;return r.a.createElement("button",{className:"b",onClick:function(e){return function(e,t){var a={Sheets:{data:x.utils.json_to_sheet(e)},SheetNames:["data"]},s=x.write(a,{bookType:"xlsx",type:"array"}),r=new Blob([s],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});N.saveAs(r,t+".xlsx")}(t,a)}},"\u05d9\u05e6\u05d0 \u05dc\u05d0\u05e7\u05e1\u05dc")}),A=function(e){Object(c.a)(s,e);var t=Object(p.a)(s);function s(e){var a;return Object(o.a)(this,s),(a=t.call(this)).state={steps:e.steps,distance:e.distance,calories:e.calories,weather:e.weather,sleep:e.sleep,dataArr:e.dataArr,table:[],exportCSV:[]},a.handleChange=a.handleChange.bind(Object(g.a)(a)),a}return Object(i.a)(s,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,s=t.value,r=t.type,n=t.checked;"checkbox"===r?this.setState(Object(m.a)({},a,n)):this.setState(Object(m.a)({},a,s))}},{key:"render",value:function(){if(a(27),this.props.ready){var e,t=!0;for(e=0;e<this.props.dataArr.length;e++)this.props.dataArr[e].values.length>0&&(t=!1);if(t)t=!0;else{var s,n,l={},o=!1,i=[];if(this.props.weekly){var c=new Date(this.props.date).getDay(),p=new Date(this.props.date-864e5*c),h=new Date(p.getTime()+5184e5);n=p.toLocaleDateString("en-GB",{day:"numeric"})+"-"+h.toLocaleDateString("en-GB",{day:"numeric",month:"short"})}this.props.monthly&&(n=new Date(this.props.date).toLocaleDateString("en-GB",{month:"short"}));var u={before:{"\u05e6\u05e2\u05d3\u05d9\u05dd":{},"\u05de\u05e8\u05d7\u05e7":{},"\u05e7\u05dc\u05d5\u05e8\u05d9\u05d5\u05ea":{},weather:{},light:{},deep:{},total:{}},after:{"\u05e6\u05e2\u05d3\u05d9\u05dd":{},"\u05de\u05e8\u05d7\u05e7":{},"\u05e7\u05dc\u05d5\u05e8\u05d9\u05d5\u05ea":{},weather:{},light:{},deep:{},total:{}}};for(u.before["\u05e6\u05e2\u05d3\u05d9\u05dd"]={sum:0,counter:0},u.before["\u05de\u05e8\u05d7\u05e7"]={sum:0,counter:0},u.before["\u05e7\u05dc\u05d5\u05e8\u05d9\u05d5\u05ea"]={sum:0,counter:0},u.before.weather={sum:0,counter:0},u.before.light={sum:0,counter:0},u.before.deep={sum:0,counter:0},u.before.total={sum:0,counter:0},u.after["\u05e6\u05e2\u05d3\u05d9\u05dd"]={sum:0,counter:0},u.after["\u05de\u05e8\u05d7\u05e7"]={sum:0,counter:0},u.after["\u05e7\u05dc\u05d5\u05e8\u05d9\u05d5\u05ea"]={sum:0,counter:0},u.after.weather={sum:0,counter:0},u.after.light={sum:0,counter:0},u.after.deep={sum:0,counter:0},u.after.total={sum:0,counter:0},e=0;e<this.props.dataArr.length;e++)for(s=0;s<this.props.dataArr[e].values.length;s++)if(this.props.showDaily){var m=new Date(this.props.dataArr[e].values[s].ValidTime),d=m.toLocaleDateString("en-GB",{day:"numeric",month:"short"}).replace(/ /g,"-");if(null==l[d]&&(l[d]={},i.push(this.props.dataArr[e].values[s].ValidTime)),"\u05e9\u05e2\u05d5\u05ea \u05e9\u05d9\u05e0\u05d4"===this.props.dataArr[e].name){for(var f=0,b=0,g=0,w=0,E=0;E<this.props.dataArr[e].values[s].Data.length;E++){if(0===E)w=this.props.dataArr[e].values[s].Data[E].StartTime;else if(w===this.props.dataArr[e].values[s].Data[E].StartTime)break;var D=this.props.dataArr[e].values[s].Data[E].EndTime-this.props.dataArr[e].values[s].Data[E].StartTime;D/=36e5,"SLEEP_LIGHT"===this.props.dataArr[e].values[s].Data[E].State?b+=D:f+=D,g+=D}l[d]||(l[d]={}),l[d].light=b,l[d].deep=f,l[d].total=g;continue}l[d][this.props.dataArr[e].name]=this.props.dataArr[e].values[s]}else if(this.props.weekly){var y=(m=new Date(this.props.dataArr[e].values[s].ValidTime)).getDay(),N=new Date(this.props.dataArr[e].values[s].ValidTime-864e5*y),x=new Date(N.getTime()+5184e5);if(n===(d=N.toLocaleDateString("en-GB",{day:"numeric"})+"-"+x.toLocaleDateString("en-GB",{day:"numeric",month:"short"}))){if("\u05e9\u05e2\u05d5\u05ea \u05e9\u05d9\u05e0\u05d4"===this.props.dataArr[e].name){var A=0,S=0,I=0,C=0;for(E=0;E<this.props.dataArr[e].values[s].Data.length;E++){if(0===E)C=this.props.dataArr[e].values[s].Data[E].StartTime;else if(C===this.props.dataArr[e].values[s].Data[E].StartTime)break;D=this.props.dataArr[e].values[s].Data[E].EndTime-this.props.dataArr[e].values[s].Data[E].StartTime,D/=36e5,"SLEEP_LIGHT"===this.props.dataArr[e].values[s].Data[E].State?S+=D:A+=D,I+=D}this.props.dataArr[e].values[s].ValidTime<this.props.date?(u.before.light.sum+=S,u.before.deep.sum+=A,u.before.total.sum+=I,u.before.light.counter++,u.before.deep.counter++,u.before.total.counter++):(u.after.light.sum+=S,u.after.deep.sum+=A,u.after.total.sum+=I,u.after.light.counter++,u.after.deep.counter++,u.after.total.counter++);continue}if(this.props.dataArr[e].values[s].ValidTime<this.props.date){if("\u05de\u05d6\u05d2 \u05d4\u05d0\u05d5\u05d5\u05d9\u05e8"===this.props.dataArr[e].name){u.before.weather.sum+=this.props.dataArr[e].values[s].Data,u.before.weather.counter++;continue}u.before[this.props.dataArr[e].name].sum+=this.props.dataArr[e].values[s].Data,u.before[this.props.dataArr[e].name].counter++}else{if("\u05de\u05d6\u05d2 \u05d4\u05d0\u05d5\u05d5\u05d9\u05e8"===this.props.dataArr[e].name){u.after.weather.sum+=this.props.dataArr[e].values[s].Data,u.after.weather.counter++;continue}u.after[this.props.dataArr[e].name].sum+=this.props.dataArr[e].values[s].Data,u.after[this.props.dataArr[e].name].counter++}o||(i.push(this.props.dataArr[e].values[s].ValidTime),o=!0);continue}if(null==l[d]&&(l[d]={},i.push(this.props.dataArr[e].values[s].ValidTime)),null==l[d][this.props.dataArr[e].name]&&(l[d][this.props.dataArr[e].name]={},l[d][this.props.dataArr[e].name].counter=0,l[d][this.props.dataArr[e].name].sum=0),"\u05e9\u05e2\u05d5\u05ea \u05e9\u05d9\u05e0\u05d4"===this.props.dataArr[e].name){var O=0,T=0,j=0,F=0;for(E=0;E<this.props.dataArr[e].values[s].Data.length;E++){if(0===E)F=this.props.dataArr[e].values[s].Data[E].StartTime;else if(F===this.props.dataArr[e].values[s].Data[E].StartTime)break;D=this.props.dataArr[e].values[s].Data[E].EndTime-this.props.dataArr[e].values[s].Data[E].StartTime,D/=36e5,"SLEEP_LIGHT"===this.props.dataArr[e].values[s].Data[E].State?T+=D:O+=D,j+=D}l[d]||(l[d]={}),l[d].total||(l[d].light={},l[d].deep={},l[d].total={},l[d].light.counter=0,l[d].deep.counter=0,l[d].total.counter=0,l[d].light.sum=0,l[d].deep.sum=0,l[d].total.sum=0),l[d].light.sum+=T,l[d].deep.sum+=O,l[d].total.sum+=j,l[d].light.counter++,l[d].deep.counter++,l[d].total.counter++;continue}l[d][this.props.dataArr[e].name].sum+=this.props.dataArr[e].values[s].Data,l[d][this.props.dataArr[e].name].counter++}else if(this.props.monthly){if(n===(d=(m=new Date(this.props.dataArr[e].values[s].ValidTime)).toLocaleDateString("en-GB",{month:"short"}))){if("\u05e9\u05e2\u05d5\u05ea \u05e9\u05d9\u05e0\u05d4"===this.props.dataArr[e].name){var _=0,Q=0,L=0,P=0;for(E=0;E<this.props.dataArr[e].values[s].Data.length;E++){if(0===E)P=this.props.dataArr[e].values[s].Data[E].StartTime;else if(P===this.props.dataArr[e].values[s].Data[E].StartTime)break;D=this.props.dataArr[e].values[s].Data[E].EndTime-this.props.dataArr[e].values[s].Data[E].StartTime,D/=36e5,"SLEEP_LIGHT"===this.props.dataArr[e].values[s].Data[E].State?Q+=D:_+=D,L+=D}this.props.dataArr[e].values[s].ValidTime<this.props.date?(u.before.light.sum+=Q,u.before.deep.sum+=_,u.before.total.sum+=L,u.before.light.counter++,u.before.deep.counter++,u.before.total.counter++):(u.after.light.sum+=Q,u.after.deep.sum+=_,u.after.total.sum+=L,u.after.light.counter++,u.after.deep.counter++,u.after.total.counter++);continue}if(this.props.dataArr[e].values[s].ValidTime<this.props.date){if("\u05de\u05d6\u05d2 \u05d4\u05d0\u05d5\u05d5\u05d9\u05e8"===this.props.dataArr[e].name){u.before.weather.sum+=this.props.dataArr[e].values[s].Data,u.before.weather.counter++;continue}u.before[this.props.dataArr[e].name].sum+=this.props.dataArr[e].values[s].Data,u.before[this.props.dataArr[e].name].counter++}else{if("\u05de\u05d6\u05d2 \u05d4\u05d0\u05d5\u05d5\u05d9\u05e8"===this.props.dataArr[e].name){u.after.weather.sum+=this.props.dataArr[e].values[s].Data,u.after.weather.counter++;continue}u.after[this.props.dataArr[e].name].sum+=this.props.dataArr[e].values[s].Data,u.after[this.props.dataArr[e].name].counter++}o||(i.push(this.props.dataArr[e].values[s].ValidTime),o=!0);continue}if(null==l[d]&&(l[d]={},i.push(this.props.dataArr[e].values[s].ValidTime)),null==l[d][this.props.dataArr[e].name]&&(l[d][this.props.dataArr[e].name]={},l[d][this.props.dataArr[e].name].counter=0,l[d][this.props.dataArr[e].name].sum=0),"\u05e9\u05e2\u05d5\u05ea \u05e9\u05d9\u05e0\u05d4"===this.props.dataArr[e].name){var B=0,q=0,V=0,G=0;for(E=0;E<this.props.dataArr[e].values[s].Data.length;E++){if(0===E)G=this.props.dataArr[e].values[s].Data[E].StartTime;else if(G===this.props.dataArr[e].values[s].Data[E].StartTime)break;D=this.props.dataArr[e].values[s].Data[E].EndTime-this.props.dataArr[e].values[s].Data[E].StartTime,D/=36e5,"SLEEP_LIGHT"===this.props.dataArr[e].values[s].Data[E].State?q+=D:B+=D,V+=D}l[d]||(l[d]={}),l[d].total||(l[d].light={},l[d].deep={},l[d].total={},l[d].light.counter=0,l[d].deep.counter=0,l[d].total.counter=0,l[d].light.sum=0,l[d].deep.sum=0,l[d].total.sum=0),l[d].light.sum+=q,l[d].deep.sum+=B,l[d].total.sum+=V,l[d].light.counter++,l[d].deep.counter++,l[d].total.counter++;continue}l[d][this.props.dataArr[e].name].sum+=this.props.dataArr[e].values[s].Data,l[d][this.props.dataArr[e].name].counter++}i=i.sort();var U=[];if(this.props.weekly||this.props.monthly)for(var H=0,M=Object.entries(l);H<M.length;H++)for(var R=Object(v.a)(M[H],1)[0],W=0,Y=Object.entries(l[R]);W<Y.length;W++){var J=Object(v.a)(Y[W],1)[0];l[R][J].Data=l[R][J].sum/l[R][J].counter}var z=[],$=Math.min();for(e=0;e<i.length;e++){if(d=(m=new Date(i[e])).toLocaleDateString("en-GB",{day:"numeric",month:"short"}).replace(/ /g,"-"),this.props.showDaily){var K=new Date(i[e]);K.setHours(0,0,0,0);var X=Math.floor((K.getTime()-this.props.date)/864e5);X<0&&X++,$===X&&X++,$=X,this.props.date||(X="-"),l[d].num=X,U.push(r.a.createElement("tr",{key:d},i[e]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},X):r.a.createElement("td",{className:"after"},X),i[e]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},d):r.a.createElement("td",{className:"after"},d),this.props.steps?l[d]["\u05e6\u05e2\u05d3\u05d9\u05dd"]?i[e]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},l[d]["\u05e6\u05e2\u05d3\u05d9\u05dd"].Data.toFixed(2)):r.a.createElement("td",{className:"after"},l[d]["\u05e6\u05e2\u05d3\u05d9\u05dd"].Data.toFixed(2)):i[e]<this.props.date?r.a.createElement("td",{className:"before"},"-"):r.a.createElement("td",{className:"after"},"-"):null,this.props.distance?l[d]["\u05de\u05e8\u05d7\u05e7"]?i[e]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},l[d]["\u05de\u05e8\u05d7\u05e7"].Data.toFixed(2)):r.a.createElement("td",{className:"after"},l[d]["\u05de\u05e8\u05d7\u05e7"].Data.toFixed(2)):i[e]<this.props.date?r.a.createElement("td",{className:"before"},"-"):r.a.createElement("td",{className:"after"},"-"):null,this.props.calories?l[d]["\u05e7\u05dc\u05d5\u05e8\u05d9\u05d5\u05ea"]?i[e]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},l[d]["\u05e7\u05dc\u05d5\u05e8\u05d9\u05d5\u05ea"].Data.toFixed(2)):r.a.createElement("td",{className:"after"},l[d]["\u05e7\u05dc\u05d5\u05e8\u05d9\u05d5\u05ea"].Data.toFixed(2)):i[e]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},"-"):r.a.createElement("td",{className:"after"},"-"):null,this.props.weather?l[d]["\u05de\u05d6\u05d2 \u05d4\u05d0\u05d5\u05d5\u05d9\u05e8"]?i[e]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},l[d]["\u05de\u05d6\u05d2 \u05d4\u05d0\u05d5\u05d5\u05d9\u05e8"].Data.toFixed(2)):r.a.createElement("td",{className:"after"},l[d]["\u05de\u05d6\u05d2 \u05d4\u05d0\u05d5\u05d5\u05d9\u05e8"].Data.toFixed(2)):i[e]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},"-"):r.a.createElement("td",{className:"after"},"-"):null,this.props.sleep?l[d].light>=0?i[e]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},l[d].light.toFixed(2)):r.a.createElement("td",{className:"after"},l[d].light.toFixed(2)):i[e]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},"-"):r.a.createElement("td",{className:"after"},"-"):null,this.props.sleep?l[d].deep>=0?i[e]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},l[d].deep.toFixed(2)):r.a.createElement("td",{className:"after"},l[d].deep.toFixed(2)):i[e]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},"-"):r.a.createElement("td",{className:"after"},"-"):null,this.props.sleep?l[d].total>=0?i[e]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},l[d].total.toFixed(2)):r.a.createElement("td",{className:"after"},l[d].total.toFixed(2)):i[e]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},"-"):r.a.createElement("td",{className:"after"},"-"):null))}else if(this.props.weekly||this.props.monthly){var Z=new Date(this.props.date);if((K=new Date(i[e])).setHours(0,0,0,0),this.props.weekly){var ee=new Date(Z.getTime()-864e5*Z.getDay());ee.setHours(0,0,0,0),y=m.getDay(),(N=new Date(m.getTime()-864e5*y)).setHours(0,0,0,0),x=new Date(N.getTime()+5184e5),d=N.toLocaleDateString("en-GB",{day:"numeric"})+"-"+x.toLocaleDateString("en-GB",{day:"numeric",month:"short"}),X=Math.floor((N.getTime()-ee.getTime())/6048e5)}else{var te=new Date(K.getFullYear(),K.getMonth(),1),ae=new Date(Z.getFullYear(),Z.getMonth(),1);(X=Math.floor((te.getTime()-ae.getTime())/24192e5))<0&&X++,d=m.toLocaleDateString("en-GB",{month:"short"})}$===X&&X++,$=X,this.props.date||(X="-"),d===n?(U.push(r.a.createElement("tr",{key:d+"before"},r.a.createElement("td",{className:"before"},0),r.a.createElement("td",{className:"before"},d),this.props.steps?u.before["\u05e6\u05e2\u05d3\u05d9\u05dd"].counter?r.a.createElement("td",{className:"before"},(u.before["\u05e6\u05e2\u05d3\u05d9\u05dd"].sum/u.before["\u05e6\u05e2\u05d3\u05d9\u05dd"].counter).toFixed(2)):r.a.createElement("td",{className:"before"},"-"):null,this.props.distance?u.before["\u05de\u05e8\u05d7\u05e7"].counter?r.a.createElement("td",{className:"before"},(u.before["\u05de\u05e8\u05d7\u05e7"].sum/u.before["\u05de\u05e8\u05d7\u05e7"].counter).toFixed(2)):r.a.createElement("td",{className:"before"},"-"):null,this.props.calories?u.before["\u05e7\u05dc\u05d5\u05e8\u05d9\u05d5\u05ea"].counter?r.a.createElement("td",{className:"before"},(u.before["\u05e7\u05dc\u05d5\u05e8\u05d9\u05d5\u05ea"].sum/u.before["\u05e7\u05dc\u05d5\u05e8\u05d9\u05d5\u05ea"].counter).toFixed(2)):r.a.createElement("td",{className:"before"},"-"):null,this.props.weather?u.before.weather.counter?r.a.createElement("td",{className:"before"},(u.before.weather.sum/u.before.weather.counter).toFixed(2)):r.a.createElement("td",{className:"before"},"-"):null,this.props.sleep?u.before.light.counter?r.a.createElement("td",{className:"before"},(u.before.light.sum/u.before.light.counter).toFixed(2)):r.a.createElement("td",{className:"before"},"-"):null,this.props.sleep?u.before.deep.counter?r.a.createElement("td",{className:"before"},(u.before.deep.sum/u.before.deep.counter).toFixed(2)):r.a.createElement("td",{className:"before"},"-"):null,this.props.sleep?u.before.total.counter?r.a.createElement("td",{className:"before"},(u.before.total.sum/u.before.total.counter).toFixed(2)):r.a.createElement("td",{className:"before"},"-"):null)),U.push(r.a.createElement("tr",{key:d+"after"},r.a.createElement("td",{className:"after"},0),r.a.createElement("td",{className:"after"},d),this.props.steps?u.after["\u05e6\u05e2\u05d3\u05d9\u05dd"].counter?r.a.createElement("td",{className:"after"},(u.after["\u05e6\u05e2\u05d3\u05d9\u05dd"].sum/u.after["\u05e6\u05e2\u05d3\u05d9\u05dd"].counter).toFixed(2)):r.a.createElement("td",{className:"after"},"-"):null,this.props.distance?u.after["\u05de\u05e8\u05d7\u05e7"].counter?r.a.createElement("td",{className:"after"},(u.after["\u05de\u05e8\u05d7\u05e7"].sum/u.after["\u05de\u05e8\u05d7\u05e7"].counter).toFixed(2)):r.a.createElement("td",{className:"after"},"-"):null,this.props.calories?u.after["\u05e7\u05dc\u05d5\u05e8\u05d9\u05d5\u05ea"].counter?r.a.createElement("td",{className:"after"},(u.after["\u05e7\u05dc\u05d5\u05e8\u05d9\u05d5\u05ea"].sum/u.after["\u05e7\u05dc\u05d5\u05e8\u05d9\u05d5\u05ea"].counter).toFixed(2)):r.a.createElement("td",{className:"after"},"-"):null,this.props.weather?u.after.weather.counter?r.a.createElement("td",{className:"after"},(u.after.weather.sum/u.after.weather.counter).toFixed(2)):r.a.createElement("td",{className:"after"},"-"):null,this.props.sleep?u.after.light.counter?r.a.createElement("td",{className:"after"},(u.after.light.sum/u.after.light.counter).toFixed(2)):r.a.createElement("td",{className:"after"},"-"):null,this.props.sleep?u.after.deep.counter?r.a.createElement("td",{className:"after"},(u.after.deep.sum/u.after.deep.counter).toFixed(2)):r.a.createElement("td",{className:"after"},"-"):null,this.props.sleep?u.after.total.counter?r.a.createElement("td",{className:"after"},(u.after.total.sum/u.after.total.counter).toFixed(2)):r.a.createElement("td",{className:"after"},"-"):null))):(l[d].num=X,U.push(r.a.createElement("tr",{key:d},i[e]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},X):r.a.createElement("td",{className:"after"},X),i[e]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},d):r.a.createElement("td",{className:"after"},d),this.props.steps?l[d]["\u05e6\u05e2\u05d3\u05d9\u05dd"]?i[e]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},l[d]["\u05e6\u05e2\u05d3\u05d9\u05dd"].Data.toFixed(2)):r.a.createElement("td",{className:"after"},l[d]["\u05e6\u05e2\u05d3\u05d9\u05dd"].Data.toFixed(2)):i[e]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},"-"):r.a.createElement("td",{className:"after"},"-"):null,this.props.distance?l[d]["\u05de\u05e8\u05d7\u05e7"]?i[e]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},l[d]["\u05de\u05e8\u05d7\u05e7"].Data.toFixed(2)):r.a.createElement("td",{className:"after"},l[d]["\u05de\u05e8\u05d7\u05e7"].Data.toFixed(2)):i[e]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},"-"):r.a.createElement("td",{className:"after"},"-"):null,this.props.calories?l[d]["\u05e7\u05dc\u05d5\u05e8\u05d9\u05d5\u05ea"]?i[e]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},l[d]["\u05e7\u05dc\u05d5\u05e8\u05d9\u05d5\u05ea"].Data.toFixed(2)):r.a.createElement("td",{className:"after"},l[d]["\u05e7\u05dc\u05d5\u05e8\u05d9\u05d5\u05ea"].Data.toFixed(2)):i[e]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},"-"):r.a.createElement("td",{className:"after"},"-"):null,this.props.weather?l[d]["\u05de\u05d6\u05d2 \u05d4\u05d0\u05d5\u05d5\u05d9\u05e8"]?i[e]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},l[d]["\u05de\u05d6\u05d2 \u05d4\u05d0\u05d5\u05d5\u05d9\u05e8"].Data.toFixed(2)):r.a.createElement("td",{className:"after"},l[d]["\u05de\u05d6\u05d2 \u05d4\u05d0\u05d5\u05d5\u05d9\u05e8"].Data.toFixed(2)):i[e]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},"-"):r.a.createElement("td",{className:"after"},"-"):null,this.props.sleep?l[d].light?i[e]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},l[d].light.Data.toFixed(2)):r.a.createElement("td",{className:"after"},l[d].light.Data.toFixed(2)):i[e]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},"-"):r.a.createElement("td",{className:"after"},"-"):null,this.props.sleep?l[d].deep?i[e]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},l[d].deep.Data.toFixed(2)):r.a.createElement("td",{className:"after"},l[d].deep.Data.toFixed(2)):i[e]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},"-"):r.a.createElement("td",{className:"after"},"-"):null,this.props.sleep?l[d].total?i[e]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},l[d].total.Data.toFixed(2)):r.a.createElement("td",{className:"after"},l[d].total.Data.toFixed(2)):i[e]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},"-"):r.a.createElement("td",{className:"after"},"-"):null)))}var se={};se["\u05ea\u05d0\u05e8\u05d9\u05da"]=d;d!==n?(this.props.date&&(this.props.showDaily?se["\u05de\u05e1\u05e4\u05e8 \u05d9\u05d5\u05dd"]=l[d].num:this.props.weekly?se["\u05de\u05e1\u05e4\u05e8 \u05e9\u05d1\u05d5\u05e2"]=l[d].num:se["\u05de\u05e1\u05e4\u05e8 \u05d7\u05d5\u05d3\u05e9"]=l[d].num),this.props.steps&&l[d]["\u05e6\u05e2\u05d3\u05d9\u05dd"]&&(se["\u05e6\u05e2\u05d3\u05d9\u05dd"]=l[d]["\u05e6\u05e2\u05d3\u05d9\u05dd"].Data),this.props.distance&&l[d]["\u05de\u05e8\u05d7\u05e7"]&&(se["\u05de\u05e8\u05d7\u05e7"]=l[d]["\u05de\u05e8\u05d7\u05e7"].Data),this.props.calories&&l[d]["\u05e7\u05dc\u05d5\u05e8\u05d9\u05d5\u05ea"]&&(se["\u05e7\u05dc\u05d5\u05e8\u05d9\u05d5\u05ea"]=l[d]["\u05e7\u05dc\u05d5\u05e8\u05d9\u05d5\u05ea"].Data),this.props.weather&&l[d]["\u05de\u05d6\u05d2 \u05d4\u05d0\u05d5\u05d5\u05d9\u05e8"]&&(se["\u05de\u05d6\u05d2 \u05d4\u05d0\u05d5\u05d5\u05d9\u05e8"]=l[d]["\u05de\u05d6\u05d2 \u05d4\u05d0\u05d5\u05d5\u05d9\u05e8"].Data),this.props.sleep&&l[d].light&&this.props.showDaily&&(se["\u05e9\u05e2\u05d5\u05ea \u05e9\u05d9\u05e0\u05d4 \u05e7\u05dc\u05d4"]=l[d].light,se["\u05e9\u05e2\u05d5\u05ea \u05e9\u05d9\u05e0\u05d4 \u05e2\u05de\u05d5\u05e7\u05d4"]=l[d].deep,se["\u05e1\u05da \u05db\u05dc \u05e9\u05e2\u05d5\u05ea \u05d4\u05e9\u05d9\u05e0\u05d4"]=l[d].total),this.props.sleep&&l[d].light&&!this.props.showDaily&&(se["\u05e9\u05e2\u05d5\u05ea \u05e9\u05d9\u05e0\u05d4 \u05e7\u05dc\u05d4"]=l[d].light.Data,se["\u05e9\u05e2\u05d5\u05ea \u05e9\u05d9\u05e0\u05d4 \u05e2\u05de\u05d5\u05e7\u05d4"]=l[d].deep.Data,se["\u05e1\u05da \u05db\u05dc \u05e9\u05e2\u05d5\u05ea \u05d4\u05e9\u05d9\u05e0\u05d4"]=l[d].total.Data),z.push(se)):(this.props.date&&(this.props.weekly?se["\u05de\u05e1\u05e4\u05e8 \u05e9\u05d1\u05d5\u05e2"]=0:se["\u05de\u05e1\u05e4\u05e8 \u05d7\u05d5\u05d3\u05e9"]=0),this.props.steps&&u.before["\u05e6\u05e2\u05d3\u05d9\u05dd"].counter&&(se["\u05e6\u05e2\u05d3\u05d9\u05dd"]=(u.before["\u05e6\u05e2\u05d3\u05d9\u05dd"].sum/u.before["\u05e6\u05e2\u05d3\u05d9\u05dd"].counter).toFixed(2)),this.props.distance&&u.before["\u05de\u05e8\u05d7\u05e7"].counter&&(se["\u05de\u05e8\u05d7\u05e7"]=(u.before["\u05de\u05e8\u05d7\u05e7"].sum/u.before["\u05de\u05e8\u05d7\u05e7"].counter).toFixed(2)),this.props.calories&&u.before["\u05e7\u05dc\u05d5\u05e8\u05d9\u05d5\u05ea"].counter&&(se["\u05e7\u05dc\u05d5\u05e8\u05d9\u05d5\u05ea"]=(u.before["\u05e7\u05dc\u05d5\u05e8\u05d9\u05d5\u05ea"].sum/u.before["\u05e7\u05dc\u05d5\u05e8\u05d9\u05d5\u05ea"].counter).toFixed(2)),this.props.weather&&u.before.weather.counter&&(se["\u05de\u05d6\u05d2 \u05d4\u05d0\u05d5\u05d5\u05d9\u05e8"]=(u.before.weather.sum/u.before.weather.counter).toFixed(2)),this.props.sleep&&u.before.light.counter&&(se["\u05e9\u05e2\u05d5\u05ea \u05e9\u05d9\u05e0\u05d4 \u05e7\u05dc\u05d4"]=(u.before.light.sum/u.before.light.counter).toFixed(2)),this.props.sleep&&u.before.deep.counter&&(se["\u05e9\u05e2\u05d5\u05ea \u05e9\u05d9\u05e0\u05d4 \u05e2\u05de\u05d5\u05e7\u05d4"]=(u.before.deep.sum/u.before.deep.counter).toFixed(2)),this.props.sleep&&u.before.total.counter&&(se["\u05e1\u05da \u05db\u05dc \u05e9\u05e2\u05d5\u05ea \u05d4\u05e9\u05d9\u05e0\u05d4"]=(u.before.total.sum/u.before.total.counter).toFixed(2)),z.push(se),se={},this.props.date&&(this.props.weekly?se["\u05de\u05e1\u05e4\u05e8 \u05e9\u05d1\u05d5\u05e2"]=0:se["\u05de\u05e1\u05e4\u05e8 \u05d7\u05d5\u05d3\u05e9"]=0),se["\u05ea\u05d0\u05e8\u05d9\u05da"]=d,this.props.steps&&u.after["\u05e6\u05e2\u05d3\u05d9\u05dd"].counter&&(se["\u05e6\u05e2\u05d3\u05d9\u05dd"]=(u.after["\u05e6\u05e2\u05d3\u05d9\u05dd"].sum/u.after["\u05e6\u05e2\u05d3\u05d9\u05dd"].counter).toFixed(2)),this.props.distance&&u.after["\u05de\u05e8\u05d7\u05e7"].counter&&(se["\u05de\u05e8\u05d7\u05e7"]=(u.after["\u05de\u05e8\u05d7\u05e7"].sum/u.after["\u05de\u05e8\u05d7\u05e7"].counter).toFixed(2)),this.props.calories&&u.after["\u05e7\u05dc\u05d5\u05e8\u05d9\u05d5\u05ea"].counter&&(se["\u05e7\u05dc\u05d5\u05e8\u05d9\u05d5\u05ea"]=(u.after["\u05e7\u05dc\u05d5\u05e8\u05d9\u05d5\u05ea"].sum/u.after["\u05e7\u05dc\u05d5\u05e8\u05d9\u05d5\u05ea"].counter).toFixed(2)),this.props.weather&&u.after.weather.counter&&(se["\u05de\u05d6\u05d2 \u05d4\u05d0\u05d5\u05d5\u05d9\u05e8"]=(u.after.weather.sum/u.after.weather.counter).toFixed(2)),this.props.sleep&&u.after.light.counter&&(se["\u05e9\u05e2\u05d5\u05ea \u05e9\u05d9\u05e0\u05d4 \u05e7\u05dc\u05d4"]=(u.after.light.sum/u.after.light.counter).toFixed(2)),this.props.sleep&&u.after.deep.counter&&(se["\u05e9\u05e2\u05d5\u05ea \u05e9\u05d9\u05e0\u05d4 \u05e2\u05de\u05d5\u05e7\u05d4"]=(u.after.deep.sum/u.after.deep.counter).toFixed(2)),this.props.sleep&&u.after.total.counter&&(se["\u05e1\u05da \u05db\u05dc \u05e9\u05e2\u05d5\u05ea \u05d4\u05e9\u05d9\u05e0\u05d4"]=(u.after.total.sum/u.after.total.counter).toFixed(2)),z.push(se))}}}return r.a.createElement("div",null,this.props.ready?r.a.createElement("div",{className:"center"},t?r.a.createElement("h4",null,"\u05dc\u05d0 \u05e7\u05d9\u05d9\u05dd \u05de\u05d9\u05d3\u05e2 \u05e2\u05dc \u05d4\u05de\u05e9\u05ea\u05de\u05e9"):r.a.createElement("table",{style:{width:"100%"},id:"mdd",className:"tabels",align:"center"},r.a.createElement("tbody",null,r.a.createElement("tr",null,this.props.dataArr.length>0&&this.props.showDaily?r.a.createElement("th",null,"\u05de\u05e1\u05e4\u05e8 \u05d9\u05d5\u05dd"):null,this.props.dataArr.length>0&&this.props.weekly?r.a.createElement("th",null,"\u05de\u05e1\u05e4\u05e8 \u05e9\u05d1\u05d5\u05e2"):null,this.props.dataArr.length>0&&this.props.monthly?r.a.createElement("th",null,"\u05de\u05e1\u05e4\u05e8 \u05d7\u05d5\u05d3\u05e9"):null,this.props.dataArr.length>0?r.a.createElement("th",null,"\u05ea\u05d0\u05e8\u05d9\u05da"):null,this.props.steps?r.a.createElement("th",null,"\u05e6\u05e2\u05d3\u05d9\u05dd"):null,this.props.distance?r.a.createElement("th",null,"\u05de\u05e8\u05d7\u05e7"):null,this.props.calories?r.a.createElement("th",null,"\u05e7\u05dc\u05d5\u05e8\u05d9\u05d5\u05ea"):null,this.props.weather?r.a.createElement("th",null,"\u05de\u05d6\u05d2 \u05d4\u05d0\u05d5\u05d5\u05d9\u05e8"):null,this.props.sleep?r.a.createElement("th",null,"\u05e9\u05e2\u05d5\u05ea \u05e9\u05d9\u05e0\u05d4 \u05e7\u05dc\u05d4"):null,this.props.sleep?r.a.createElement("th",null,"\u05e9\u05e2\u05d5\u05ea \u05e9\u05d9\u05e0\u05d4 \u05e2\u05de\u05d5\u05e7\u05d4"):null,this.props.sleep?r.a.createElement("th",null,"\u05e1\u05da \u05db\u05dc \u05e9\u05e2\u05d5\u05ea \u05d4\u05e9\u05d9\u05e0\u05d4"):null),U)),this.props.dataArr.length>0&&!t?r.a.createElement(k,{csvData:z,fileName:this.props.name+" \u05de\u05d3\u05d3\u05d9\u05dd"}):null):null)}}]),s}(s.Component),S=(a(27),function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this)).handleChange=s.handleChange.bind(Object(g.a)(s)),s}return Object(i.a)(a,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,s=t.value,r=t.type,n=t.checked;"checkbox"===r?this.setState(Object(m.a)({},a,n)):this.setState(Object(m.a)({},a,s))}},{key:"render",value:function(){if(this.props.ready){var e=!1;if(this.props.data.length>0){var t,a,s=!1,n=[],l=[],o=this.props.data,i={},c=[],p=new Date(this.props.date),h={before:{sum:0,counter:0,text:""},after:{sum:0,counter:0,text:""}};if(this.props.weekly){var u=p.getDay(),m=new Date(this.props.date-864e5*u),d=new Date(m.getTime()+5184e5);a=m.toLocaleDateString("en-GB",{day:"numeric"})+"-"+d.toLocaleDateString("en-GB",{day:"numeric",month:"short"})}this.props.monthly&&(a=p.toLocaleDateString("en-GB",{month:"short"}));var f=Math.min();for(t=0;t<o.length;t++)if(this.props.showDaily){for(var b=new Date(o[t].ValidTime),g=b.toLocaleDateString("en-GB",{day:"numeric",month:"short"}).replace(/ /g,"-"),w="",E=0;E<o[t].Answers[1].AnswerID.length;E++)0===o[t].Answers[1].AnswerID[E]?w+="\u05dc\u05d0 \u05e0\u05d8\u05dc\u05ea\u05d9, ":1===o[t].Answers[1].AnswerID[E]?w+="\u05d1\u05e1\u05d9\u05e1\u05d9\u05ea, ":2===o[t].Answers[1].AnswerID[E]?w+="\u05de\u05ea\u05e7\u05d3\u05de\u05ea, ":3===o[t].Answers[1].AnswerID[E]&&(w+="\u05e0\u05e8\u05e7\u05d5\u05d8\u05d9\u05ea, ");w=w.slice(0,-2);var D=new Date(o[t].ValidTime);D.setHours(0,0,0,0),p.setHours(0,0,0,0);var y=Math.floor((D.getTime()-this.props.date)/864e5);y<0&&y++,f===y&&y++,f=y,this.props.date||(y="-"),n.push(r.a.createElement("tr",{key:t},o[t].ValidTime<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},y):r.a.createElement("td",{className:"after"},y),o[t].ValidTime<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},g):r.a.createElement("td",{className:"after"},g),o[t].ValidTime<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},o[t].Answers[0].AnswerID[0]):r.a.createElement("td",{className:"after"},o[t].Answers[0].AnswerID[0]),o[t].ValidTime<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},w):r.a.createElement("td",{className:"after"},w)));var N={};N["\u05de\u05e1\u05e4\u05e8 \u05d9\u05d5\u05dd"]=y,N["\u05ea\u05d0\u05e8\u05d9\u05da"]=g,N["\u05e8\u05de\u05ea \u05db\u05d0\u05d1"]=o[t].Answers[0].AnswerID[0],N["\u05ea\u05e8\u05d5\u05e4\u05d4"]=w,c.push(N)}else if(this.props.weekly){var x=(b=new Date(o[t].ValidTime)).getDay(),A=new Date(o[t].ValidTime-864e5*x),S=new Date(A.getTime()+5184e5);if(a===(g=A.toLocaleDateString("en-GB",{day:"numeric"})+"-"+S.toLocaleDateString("en-GB",{day:"numeric",month:"short"}))){if(o[t].ValidTime<this.props.date)for(h.before.sum+=o[t].Answers[0].AnswerID[0],h.before.counter++,E=0;E<o[t].Answers[1].AnswerID.length;E++)h.before.text.includes("\u05dc\u05d0 \u05e0\u05d8\u05dc\u05ea\u05d9")||0!==o[t].Answers[1].AnswerID[E]?h.before.text.includes("\u05d1\u05e1\u05d9\u05e1\u05d9\u05ea")||1!==o[t].Answers[1].AnswerID[E]?h.before.text.includes("\u05de\u05ea\u05e7\u05d3\u05de\u05ea")||2!==o[t].Answers[1].AnswerID[E]?h.before.text.includes("\u05e0\u05e8\u05e7\u05d5\u05d8\u05d9\u05ea")||3!==o[t].Answers[1].AnswerID[E]||(h.before.text+="\u05e0\u05e8\u05e7\u05d5\u05d8\u05d9\u05ea, "):h.before.text+="\u05de\u05ea\u05e7\u05d3\u05de\u05ea, ":h.before.text+="\u05d1\u05e1\u05d9\u05e1\u05d9\u05ea, ":h.before.text+="\u05dc\u05d0 \u05e0\u05d8\u05dc\u05ea\u05d9, ";else for(h.after.sum+=o[t].Answers[0].AnswerID[0],h.after.counter++,E=0;E<o[t].Answers[1].AnswerID.length;E++)h.after.text.includes("\u05dc\u05d0 \u05e0\u05d8\u05dc\u05ea\u05d9")||0!==o[t].Answers[1].AnswerID[E]?h.after.text.includes("\u05d1\u05e1\u05d9\u05e1\u05d9\u05ea")||1!==o[t].Answers[1].AnswerID[E]?h.after.text.includes("\u05de\u05ea\u05e7\u05d3\u05de\u05ea")||2!==o[t].Answers[1].AnswerID[E]?h.after.text.includes("\u05e0\u05e8\u05e7\u05d5\u05d8\u05d9\u05ea")||3!==o[t].Answers[1].AnswerID[E]||(h.after.text+="\u05e0\u05e8\u05e7\u05d5\u05d8\u05d9\u05ea, "):h.after.text+="\u05de\u05ea\u05e7\u05d3\u05de\u05ea, ":h.after.text+="\u05d1\u05e1\u05d9\u05e1\u05d9\u05ea, ":h.after.text+="\u05dc\u05d0 \u05e0\u05d8\u05dc\u05ea\u05d9, ";s||(l.push(o[t].ValidTime),s=!0);continue}for(null==i[g]&&(i[g]={},i[g].sum=0,i[g].counter=0,i[g].text="",l.push(o[t].ValidTime)),i[g].sum+=o[t].Answers[0].AnswerID[0],i[g].counter++,E=0;E<o[t].Answers[1].AnswerID.length;E++)i[g].text.includes("\u05dc\u05d0 \u05e0\u05d8\u05dc\u05ea\u05d9")||0!==o[t].Answers[1].AnswerID[E]?i[g].text.includes("\u05d1\u05e1\u05d9\u05e1\u05d9\u05ea")||1!==o[t].Answers[1].AnswerID[E]?i[g].text.includes("\u05de\u05ea\u05e7\u05d3\u05de\u05ea")||2!==o[t].Answers[1].AnswerID[E]?i[g].text.includes("\u05e0\u05e8\u05e7\u05d5\u05d8\u05d9\u05ea")||3!==o[t].Answers[1].AnswerID[E]||(i[g].text+="\u05e0\u05e8\u05e7\u05d5\u05d8\u05d9\u05ea, "):i[g].text+="\u05de\u05ea\u05e7\u05d3\u05de\u05ea, ":i[g].text+="\u05d1\u05e1\u05d9\u05e1\u05d9\u05ea, ":i[g].text+="\u05dc\u05d0 \u05e0\u05d8\u05dc\u05ea\u05d9, "}else if(this.props.monthly){if(a===(g=(b=new Date(o[t].ValidTime)).toLocaleDateString("en-GB",{month:"short"}))){if(o[t].ValidTime<this.props.date)for(h.before.sum+=o[t].Answers[0].AnswerID[0],h.before.counter++,E=0;E<o[t].Answers[1].AnswerID.length;E++)h.before.text.includes("\u05dc\u05d0 \u05e0\u05d8\u05dc\u05ea\u05d9")||0!==o[t].Answers[1].AnswerID[E]?h.before.text.includes("\u05d1\u05e1\u05d9\u05e1\u05d9\u05ea")||1!==o[t].Answers[1].AnswerID[E]?h.before.text.includes("\u05de\u05ea\u05e7\u05d3\u05de\u05ea")||2!==o[t].Answers[1].AnswerID[E]?h.before.text.includes("\u05e0\u05e8\u05e7\u05d5\u05d8\u05d9\u05ea")||3!==o[t].Answers[1].AnswerID[E]||(h.before.text+="\u05e0\u05e8\u05e7\u05d5\u05d8\u05d9\u05ea, "):h.before.text+="\u05de\u05ea\u05e7\u05d3\u05de\u05ea, ":h.before.text+="\u05d1\u05e1\u05d9\u05e1\u05d9\u05ea, ":h.before.text+="\u05dc\u05d0 \u05e0\u05d8\u05dc\u05ea\u05d9, ";else for(h.after.sum+=o[t].Answers[0].AnswerID[0],h.after.counter++,E=0;E<o[t].Answers[1].AnswerID.length;E++)h.after.text.includes("\u05dc\u05d0 \u05e0\u05d8\u05dc\u05ea\u05d9")||0!==o[t].Answers[1].AnswerID[E]?h.after.text.includes("\u05d1\u05e1\u05d9\u05e1\u05d9\u05ea")||1!==o[t].Answers[1].AnswerID[E]?h.after.text.includes("\u05de\u05ea\u05e7\u05d3\u05de\u05ea")||2!==o[t].Answers[1].AnswerID[E]?h.after.text.includes("\u05e0\u05e8\u05e7\u05d5\u05d8\u05d9\u05ea")||3!==o[t].Answers[1].AnswerID[E]||(h.after.text+="\u05e0\u05e8\u05e7\u05d5\u05d8\u05d9\u05ea, "):h.after.text+="\u05de\u05ea\u05e7\u05d3\u05de\u05ea, ":h.after.text+="\u05d1\u05e1\u05d9\u05e1\u05d9\u05ea, ":h.after.text+="\u05dc\u05d0 \u05e0\u05d8\u05dc\u05ea\u05d9, ";s||(l.push(o[t].ValidTime),s=!0);continue}for(null==i[g]&&(i[g]={},i[g].sum=0,i[g].counter=0,i[g].text="",l.push(o[t].ValidTime)),i[g].sum+=o[t].Answers[0].AnswerID[0],i[g].counter++,E=0;E<o[t].Answers[1].AnswerID.length;E++)i[g].text.includes("\u05dc\u05d0 \u05e0\u05d8\u05dc\u05ea\u05d9")||0!==o[t].Answers[1].AnswerID[E]?i[g].text.includes("\u05d1\u05e1\u05d9\u05e1\u05d9\u05ea")||1!==o[t].Answers[1].AnswerID[E]?i[g].text.includes("\u05de\u05ea\u05e7\u05d3\u05de\u05ea")||2!==o[t].Answers[1].AnswerID[E]?i[g].text.includes("\u05e0\u05e8\u05e7\u05d5\u05d8\u05d9\u05ea")||3!==o[t].Answers[1].AnswerID[E]||(i[g].text+="\u05e0\u05e8\u05e7\u05d5\u05d8\u05d9\u05ea, "):i[g].text+="\u05de\u05ea\u05e7\u05d3\u05de\u05ea, ":i[g].text+="\u05d1\u05e1\u05d9\u05e1\u05d9\u05ea, ":i[g].text+="\u05dc\u05d0 \u05e0\u05d8\u05dc\u05ea\u05d9, "}if(l=l.sort(),this.props.weekly||this.props.monthly){for(var I=0,C=Object.entries(i);I<C.length;I++){var O=Object(v.a)(C[I],1)[0];i[O].Data=i[O].sum/i[O].counter}var T=new Date(this.props.date);for(t=0;t<l.length;t++){if(b=new Date(l[t]),(D=new Date(l[t])).setHours(0,0,0,0),this.props.weekly){var j=new Date(T.getTime()-864e5*T.getDay());j.setHours(0,0,0,0),x=b.getDay(),(A=new Date(b.getTime()-864e5*x)).setHours(0,0,0,0),S=new Date(A.getTime()+5184e5),g=A.toLocaleDateString("en-GB",{day:"numeric"})+"-"+S.toLocaleDateString("en-GB",{day:"numeric",month:"short"}),y=Math.floor((A.getTime()-j.getTime())/6048e5)}else{var F=new Date(D.getFullYear(),D.getMonth(),1),_=new Date(T.getFullYear(),T.getMonth(),1);(y=Math.floor((F.getTime()-_.getTime())/24192e5))<0&&y++,g=b.toLocaleDateString("en-GB",{month:"short"})}if(f===y&&y++,f=y,this.props.date||(y="-"),g!==a)i[g].text=i[g].text.slice(0,-2),n.push(r.a.createElement("tr",{key:g},l[t]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},y):r.a.createElement("td",{className:"after"},y),l[t]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},g):r.a.createElement("td",{className:"after"},g),l[t]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},i[g].Data.toFixed(2)):r.a.createElement("td",{className:"after"},i[g].Data.toFixed(2)),l[t]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},i[g].text):r.a.createElement("td",{className:"after"},i[g].text))),N={},this.props.date&&(this.props.weekly?N["\u05de\u05e1\u05e4\u05e8 \u05e9\u05d1\u05d5\u05e2"]=y:N["\u05de\u05e1\u05e4\u05e8 \u05d7\u05d5\u05d3\u05e9"]=y),N["\u05ea\u05d0\u05e8\u05d9\u05da"]=g,N["\u05e8\u05de\u05ea \u05db\u05d0\u05d1"]=i[g],this.props.showDaily?N["\u05ea\u05e8\u05d5\u05e4\u05d4"]=w:N["\u05ea\u05e8\u05d5\u05e4\u05d5\u05ea \u05e9\u05d4\u05d9\u05d5 \u05d1\u05e9\u05d9\u05de\u05d5\u05e9"]=i[g].text,c.push(N);else{h.before.text=h.before.text.slice(0,-2),h.after.text=h.after.text.slice(0,-2),n.push(r.a.createElement("tr",{key:g+"before"},r.a.createElement("td",{className:"before"},y),r.a.createElement("td",{className:"before"},g),h.before.counter?r.a.createElement("td",{className:"before"},(h.before.sum/h.before.counter).toFixed(2)):r.a.createElement("td",{className:"before"},"-"),h.before.counter?r.a.createElement("td",{className:"before"},h.before.text):r.a.createElement("td",{className:"before"},"-"))),n.push(r.a.createElement("tr",{key:g+"after"},r.a.createElement("td",{className:"after"},y),r.a.createElement("td",{className:"after"},g),h.after.counter?r.a.createElement("td",{className:"after"},(h.after.sum/h.after.counter).toFixed(2)):r.a.createElement("td",{className:"after"},"-"),h.after.counter?r.a.createElement("td",{className:"after"},h.after.text):r.a.createElement("td",{className:"after"},"-")));N={},this.props.date&&(this.props.weekly?N["\u05de\u05e1\u05e4\u05e8 \u05e9\u05d1\u05d5\u05e2"]=0:N["\u05de\u05e1\u05e4\u05e8 \u05d7\u05d5\u05d3\u05e9"]=0),N["\u05ea\u05d0\u05e8\u05d9\u05da"]=g,N["\u05e8\u05de\u05ea \u05db\u05d0\u05d1"]=(h.before.sum/h.before.counter).toFixed(2),N["\u05ea\u05e8\u05d5\u05e4\u05d5\u05ea \u05e9\u05d4\u05d9\u05d5 \u05d1\u05e9\u05d9\u05de\u05d5\u05e9"]=h.before.text,c.push(N),N={},this.props.date&&(this.props.weekly?N["\u05de\u05e1\u05e4\u05e8 \u05e9\u05d1\u05d5\u05e2"]=0:N["\u05de\u05e1\u05e4\u05e8 \u05d7\u05d5\u05d3\u05e9"]=0),N["\u05ea\u05d0\u05e8\u05d9\u05da"]=g,N["\u05e8\u05de\u05ea \u05db\u05d0\u05d1"]=(h.after.sum/h.after.counter).toFixed(2),N["\u05ea\u05e8\u05d5\u05e4\u05d5\u05ea \u05e9\u05d4\u05d9\u05d5 \u05d1\u05e9\u05d9\u05de\u05d5\u05e9"]=h.after.text,c.push(N)}}}}else e=!0}return r.a.createElement("div",null,this.props.ready?r.a.createElement("div",null,e?r.a.createElement("h4",null,"\u05dc\u05d0 \u05e7\u05d9\u05d9\u05dd \u05de\u05d9\u05d3\u05e2 \u05e2\u05dc \u05d4\u05de\u05e9\u05ea\u05de\u05e9"):r.a.createElement("div",{className:"center"},r.a.createElement("table",{style:{width:"100%"},id:"daily",className:"tabels"},r.a.createElement("tbody",null,r.a.createElement("tr",null,this.props.showDaily?r.a.createElement("th",null,"\u05de\u05e1\u05e4\u05e8 \u05d9\u05d5\u05dd"):null,this.props.weekly?r.a.createElement("th",null,"\u05de\u05e1\u05e4\u05e8 \u05e9\u05d1\u05d5\u05e2"):null,this.props.monthly?r.a.createElement("th",null,"\u05de\u05e1\u05e4\u05e8 \u05d7\u05d5\u05d3\u05e9"):null,r.a.createElement("th",null,"\u05ea\u05d0\u05e8\u05d9\u05da"),r.a.createElement("th",null,"\u05e8\u05de\u05ea \u05db\u05d0\u05d1"),this.props.showDaily?r.a.createElement("th",null,"\u05ea\u05e8\u05d5\u05e4\u05d4"):r.a.createElement("th",null,"\u05ea\u05e8\u05d5\u05e4\u05d5\u05ea \u05e9\u05d4\u05d9\u05d5 \u05d1\u05e9\u05d9\u05de\u05d5\u05e9")),n)),r.a.createElement(k,{csvData:c,fileName:this.props.name+" \u05e9\u05d0\u05dc\u05d5\u05df \u05d9\u05d5\u05de\u05d9"})),"  "):null)}}]),a}(s.Component)),I=a(20),C=(a(28),function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this)).handleChange=s.handleChange.bind(Object(g.a)(s)),s.sort_by_key=function(e,t){return e.sort((function(e,a){var s=e[t],r=a[t];return s<r?-1:s>r?1:0}))},s}return Object(i.a)(a,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,s=t.value,r=t.type,n=t.checked;"checkbox"===r?this.setState(Object(m.a)({},a,n)):this.setState(Object(m.a)({},a,s))}},{key:"render",value:function(){if(this.props.ready){var e=!1;if(this.props.data&&this.props.data.length>0){var t,a=this.sort_by_key(this.props.data,"Timestamp"),s={},n=0,l=!1,o=new Date(this.props.date),i={},c={},p=[];if(this.props.weekly){var h=new Date(this.props.date).getDay(),u=new Date(this.props.date-864e5*h),m=new Date(u.getTime()+5184e5);t=u.toLocaleDateString("en-GB",{day:"numeric"})+" - "+m.toLocaleDateString("en-GB",{day:"numeric",month:"short"})}this.props.monthly&&(t=new Date(this.props.date).toLocaleDateString("en-GB",{month:"short"}));for(var d={before:{sum:0,counter:0},after:{sum:0,counter:0}},f=0;f<a.length;f++)if(a[f].Data<0&&(n=-1),this.props.showDaily){var b=new Date(a[f].ValidTime),g=b.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}).replace(/ /g,"-");b<=o&&(s[g]=a[f].Data.toFixed(2)),b>=o&&(i[g]=a[f].Data.toFixed(2))}else if(this.props.weekly){var w=(b=new Date(a[f].ValidTime)).getDay(),E=new Date(a[f].ValidTime-864e5*w),D=new Date(E.getTime()+5184e5);t===(g=E.toLocaleDateString("en-GB",{day:"numeric"})+" - "+D.toLocaleDateString("en-GB",{day:"numeric",month:"short"}))?(a[f].ValidTime<this.props.date?(d.before.counter++,d.before.sum+=a[f].Data):(d.after.counter++,d.after.sum+=a[f].Data),l||(l=!0,p.push(a[f].ValidTime))):(null==c[g]&&(c[g]={},c[g].counter=0,c[g].sum=0,p.push(a[f].ValidTime)),c[g].sum+=a[f].Data,c[g].counter++)}else this.props.monthly&&(t===(g=(b=new Date(a[f].ValidTime)).toLocaleDateString("en-GB",{month:"short"}))?(a[f].ValidTime<this.props.date?(d.before.counter++,d.before.sum+=a[f].Data):(d.after.counter++,d.after.sum+=a[f].Data),l||(l=!0,p.push(a[f].ValidTime))):(null==c[g]&&(c[g]={},c[g].counter=0,c[g].sum=0,p.push(a[f].ValidTime)),c[g].sum+=a[f].Data,c[g].counter++));if(p=p.sort(),this.props.weekly||this.props.monthly)for(f=0;f<p.length;f++)b=new Date(p[f]),this.props.weekly?(w=b.getDay(),E=new Date(b.getTime()-864e5*w),D=new Date(E.getTime()+5184e5),g=E.toLocaleDateString("en-GB",{day:"numeric"})+" - "+D.toLocaleDateString("en-GB",{day:"numeric",month:"short"})):g=b.toLocaleDateString("en-GB",{month:"short"}),g!==t?(b<=o&&(s[g]=(c[g].sum/c[g].counter).toFixed(2)),b>=o&&(i[g]=(c[g].sum/c[g].counter).toFixed(2))):(s[g]=(d.before.sum/d.before.counter).toFixed(2),i[g]=(d.after.sum/d.after.counter).toFixed(2));var y=[{name:"\u05dc\u05e4\u05e0\u05d9 \u05d4\u05e0\u05d9\u05ea\u05d5\u05d7",data:s},{name:"\u05d0\u05d7\u05e8\u05d9 \u05d4\u05e0\u05d9\u05ea\u05d5\u05d7",data:i}]}else e=!0}return r.a.createElement("div",null,this.props.ready?r.a.createElement("div",null,r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,this.props.name),e?r.a.createElement("h4",null,"\u05dc\u05d0 \u05e7\u05d9\u05d9\u05dd \u05de\u05d9\u05d3\u05e2 \u05e2\u05dc \u05d4\u05de\u05e9\u05ea\u05de\u05e9"):r.a.createElement(I.a,{download:!0,data:y,min:n}))):null)}}]),a}(s.Component)),O=function(e){Object(c.a)(s,e);var t=Object(p.a)(s);function s(e){var a;return Object(o.a)(this,s),(a=t.call(this)).handleChange=a.handleChange.bind(Object(g.a)(a)),a}return Object(i.a)(s,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,s=t.value,r=t.type,n=t.checked;"checkbox"===r?this.setState(Object(m.a)({},a,n)):this.setState(Object(m.a)({},a,s))}},{key:"render",value:function(){if(a(27),this.props.ready){for(var e=!0,t=0;t<this.props.data.length;t++)this.props.data[t].data.length>0&&(e=!1);if(e)e=!0;else{var s,n,l={},o=this.props.data,i=!1,c=[],p={},h={before:{1:{},2:{},3:{},4:{},5:{},6:0},after:{1:{},2:{},3:{},4:{},5:{},6:0}};if(h.before[1]={sum:0,counter:0},h.before[2]={sum:0,counter:0},h.before[3]={sum:0,counter:0},h.before[4]={sum:0,counter:0},h.before[5]={sum:0,counter:0},h.before[6]={sum:0,counter:0},h.after[1]={sum:0,counter:0},h.after[2]={sum:0,counter:0},h.after[3]={sum:0,counter:0},h.after[4]={sum:0,counter:0},h.after[5]={sum:0,counter:0},h.after[6]={sum:0,counter:0},this.props.weekly){var u=new Date(this.props.date).getDay(),m=new Date(this.props.date-864e5*u),d=new Date(m.getTime()+5184e5);n=m.toLocaleDateString("en-GB",{day:"numeric"})+"-"+d.toLocaleDateString("en-GB",{day:"numeric",month:"short"})}for(this.props.monthly&&(n=new Date(this.props.date).toLocaleDateString("en-GB",{month:"short"})),t=0;t<o.length;t++)for(s=0;s<o[t].data.length;s++)if(this.props.showDaily){var f=new Date(o[t].data[s].ValidTime),b=f.toLocaleDateString("en-GB",{day:"numeric",month:"short"}).replace(/ /g,"-");null==l[b]&&(l[b]={},c.push(o[t].data[s].ValidTime)),l[b][o[t].data[s].QuestionnaireID]=o[t].data[s].Score,p[o[t].data[s].QuestionnaireID]=!0}else if(this.props.weekly){p[o[t].data[s].QuestionnaireID]=!0;var g=(f=new Date(o[t].data[s].ValidTime)).getDay(),w=new Date(o[t].data[s].ValidTime-864e5*g),E=new Date(w.getTime()+5184e5);if(n===(b=w.toLocaleDateString("en-GB",{day:"numeric"})+"-"+E.toLocaleDateString("en-GB",{day:"numeric",month:"short"}))){o[t].data[s].ValidTime<this.props.date?(h.before[o[t].data[s].QuestionnaireID].sum+=o[t].data[s].Score,h.before[o[t].data[s].QuestionnaireID].counter++):(h.after[o[t].data[s].QuestionnaireID].sum+=o[t].data[s].Score,h.after[o[t].data[s].QuestionnaireID].counter++),i||(c.push(o[t].data[s].ValidTime),i=!0);continue}null==l[b]&&(l[b]={},c.push(o[t].data[s].ValidTime)),null==l[b][o[t].data[s].QuestionnaireID]&&(l[b][o[t].data[s].QuestionnaireID]={},l[b][o[t].data[s].QuestionnaireID].sum=0,l[b][o[t].data[s].QuestionnaireID].counter=0),l[b][o[t].data[s].QuestionnaireID].sum+=o[t].data[s].Score,l[b][o[t].data[s].QuestionnaireID].counter++,p[o[t].data[s].QuestionnaireID]=!0}else if(this.props.monthly){if(p[o[t].data[s].QuestionnaireID]=!0,n===(b=(f=new Date(o[t].data[s].ValidTime)).toLocaleDateString("en-GB",{month:"short"}))){o[t].data[s].ValidTime<this.props.date?(h.before[o[t].data[s].QuestionnaireID].sum+=o[t].data[s].Score,h.before[o[t].data[s].QuestionnaireID].counter++):(h.after[o[t].data[s].QuestionnaireID].sum+=o[t].data[s].Score,h.after[o[t].data[s].QuestionnaireID].counter++),i||(c.push(o[t].data[s].ValidTime),i=!0);continue}null==l[b]&&(l[b]={},c.push(o[t].data[s].ValidTime)),null==l[b][o[t].data[s].QuestionnaireID]&&(l[b][o[t].data[s].QuestionnaireID]={},l[b][o[t].data[s].QuestionnaireID].sum=0,l[b][o[t].data[s].QuestionnaireID].counter=0),l[b][o[t].data[s].QuestionnaireID].sum+=o[t].data[s].Score,l[b][o[t].data[s].QuestionnaireID].counter++,p[o[t].data[s].QuestionnaireID]=!0}c=c.sort();var D=[],y=[];if(this.props.weekly||this.props.monthly)for(var N=0,x=Object.entries(l);N<x.length;N++)for(var A=Object(v.a)(x[N],1)[0],S=0,I=Object.entries(l[A]);S<I.length;S++){var C=Object(v.a)(I[S],1)[0];l[A][C].Data=l[A][C].sum/l[A][C].counter}var O=Math.min();for(t=0;t<c.length;t++){var T={};if(b=(f=new Date(c[t])).toLocaleDateString("en-GB",{day:"numeric",month:"short"}).replace(/ /g,"-"),this.props.showDaily){var j=new Date(c[t]);j.setHours(0,0,0,0);var F=Math.floor((j.getTime()-this.props.date)/864e5);F<0&&F++,O===F&&F++,O=F,this.props.date||(F="-"),l[b].num=F,D.push(r.a.createElement("tr",{key:b},c[t]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},F):r.a.createElement("td",{className:"after"},F),c[t]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},b):r.a.createElement("td",{className:"after"},b),p[1]?l[b][1]>=0||l[b][1]<0?c[t]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},l[b][1]):r.a.createElement("td",{className:"after"},l[b][1]):c[t]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},"-"):r.a.createElement("td",{className:"after"},"-"):null,p[2]?l[b][2]>=0||l[b][2]<0?c[t]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},l[b][2]):r.a.createElement("td",{className:"after"},l[b][2]):c[t]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},"-"):r.a.createElement("td",{className:"after"},"-"):null,p[3]?l[b][3]>=0||l[b][3]<0?c[t]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},l[b][3]):r.a.createElement("td",{className:"after"},l[b][3]):c[t]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},"-"):r.a.createElement("td",{className:"after"},"-"):null,p[4]?l[b][4]>=0||l[b][4]<0?c[t]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},l[b][4]):r.a.createElement("td",{className:"after"},l[b][4]):c[t]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},"-"):r.a.createElement("td",{className:"after"},"-"):null,p[5]?l[b][5]>=0||l[b][5]<0?c[t]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},l[b][5]):r.a.createElement("td",{className:"after"},l[b][5]):c[t]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},"-"):r.a.createElement("td",{className:"after"},"-"):null,p[6]?l[b][6]>=0||l[b][6]<0?c[t]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},l[b][6]):r.a.createElement("td",{className:"after"},l[b][6]):c[t]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},"-"):r.a.createElement("td",{className:"after"},"-"):null))}else if(this.props.weekly||this.props.monthly){var _=new Date(this.props.date);if((j=new Date(c[t])).setHours(0,0,0,0),this.props.weekly){var Q=new Date(_.getTime()-864e5*_.getDay());Q.setHours(0,0,0,0),g=f.getDay(),(w=new Date(f.getTime()-864e5*g)).setHours(0,0,0,0),E=new Date(w.getTime()+5184e5),b=w.toLocaleDateString("en-GB",{day:"numeric"})+"-"+E.toLocaleDateString("en-GB",{day:"numeric",month:"short"}),F=Math.floor((w.getTime()-Q.getTime())/6048e5)}else{var L=new Date(j.getFullYear(),j.getMonth(),1),P=new Date(_.getFullYear(),_.getMonth(),1);(F=Math.floor((L.getTime()-P.getTime())/24192e5))<0&&F++,b=f.toLocaleDateString("en-GB",{month:"short"})}if(O===F&&F++,O=F,this.props.date||(F="-"),b===n){D.push(r.a.createElement("tr",{key:b+"before"},r.a.createElement("td",{className:"before"},0),r.a.createElement("td",{className:"before"},b),p[1]?h.before[1].counter?r.a.createElement("td",{className:"before"}," ",(h.before[1].sum/h.before[1].counter).toFixed(2)," "):r.a.createElement("td",{className:"before"}," - "):null,p[2]?h.before[2].counter?r.a.createElement("td",{className:"before"}," ",(h.before[2].sum/h.before[2].counter).toFixed(2)," "):r.a.createElement("td",{className:"before"}," - "):null,p[3]?h.before[3].counter?r.a.createElement("td",{className:"before"}," ",(h.before[3].sum/h.before[3].counter).toFixed(2)," "):r.a.createElement("td",{className:"before"}," - "):null,p[4]?h.before[4].counter?r.a.createElement("td",{className:"before"}," ",(h.before[4].sum/h.before[4].counter).toFixed(2)," "):r.a.createElement("td",{className:"before"}," - "):null,p[5]?h.before[5].counter?r.a.createElement("td",{className:"before"}," ",(h.before[5].sum/h.before[5].counter).toFixed(2)," "):r.a.createElement("td",{className:"before"}," - "):null,p[6]?h.before[6].counter?r.a.createElement("td",{className:"before"}," ",(h.before[6].sum/h.before[6].counter).toFixed(2)," "):r.a.createElement("td",{className:"before"}," - "):null)),D.push(r.a.createElement("tr",{key:b+"after"},r.a.createElement("td",{className:"after"},0),r.a.createElement("td",{className:"after"},b),p[1]?h.after[1].counter?r.a.createElement("td",{className:"after"}," ",(h.after[1].sum/h.after[1].counter).toFixed(2)," "):r.a.createElement("td",{className:"after"}," - "):null,p[2]?h.after[2].counter?r.a.createElement("td",{className:"after"}," ",(h.after[2].sum/h.after[2].counter).toFixed(2)," "):r.a.createElement("td",{className:"after"}," - "):null,p[3]?h.after[3].counter?r.a.createElement("td",{className:"after"}," ",(h.after[3].sum/h.after[3].counter).toFixed(2)," "):r.a.createElement("td",{className:"after"}," - "):null,p[4]?h.after[4].counter?r.a.createElement("td",{className:"after"}," ",(h.after[4].sum/h.after[4].counter).toFixed(2)," "):r.a.createElement("td",{className:"after"}," - "):null,p[5]?h.after[5].counter?r.a.createElement("td",{className:"after"}," ",(h.after[5].sum/h.after[5].counter).toFixed(2)," "):r.a.createElement("td",{className:"after"}," - "):null,p[6]?h.after[6].counter?r.a.createElement("td",{className:"after"}," ",(h.after[6].sum/h.after[6].counter).toFixed(2)," "):r.a.createElement("td",{className:"after"}," - "):null)),T={};this.props.date&&(this.props.weekly?T["\u05de\u05e1\u05e4\u05e8 \u05e9\u05d1\u05d5\u05e2"]=0:T["\u05de\u05e1\u05e4\u05e8 \u05d7\u05d5\u05d3\u05e9"]=0),T["\u05ea\u05d0\u05e8\u05d9\u05da"]=b,p[1]&&h.before[1].counter&&(T["Oswestry Disability Index"]=(h.before[1].sum/h.before[1].counter).toFixed(2)),p[2]&&h.before[2].counter&&(T["Neck Disability Index"]=(h.before[2].sum/h.before[2].counter).toFixed(2)),p[3]&&h.before[3].counter&&(T["Lower Extremity Functional Scale"]=(h.before[3].sum/h.before[3].counter).toFixed(2)),p[41]&&h.before[4].counter&&(T["Oswestry low back pain"]=(h.before[4].sum/h.before[4].counter).toFixed(2)),p[5]&&h.before[5].counter&&(T["EQ-5D"]=(h.before[5].sum/h.before[5].counter).toFixed(2)),p[6]&&h.before[6].counter&&(T["EQ-5D"]=(h.before[6].sum/h.before[6].counter).toFixed(2)),y.push(T),T={},this.props.date&&(this.props.weekly?T["\u05de\u05e1\u05e4\u05e8 \u05e9\u05d1\u05d5\u05e2"]=0:T["\u05de\u05e1\u05e4\u05e8 \u05d7\u05d5\u05d3\u05e9"]=0),T["\u05ea\u05d0\u05e8\u05d9\u05da"]=b,p[1]&&h.after[1].counter&&(T["Oswestry Disability Index"]=(h.after[1].sum/h.after[1].counter).toFixed(2)),p[2]&&h.after[2].counter&&(T["Neck Disability Index"]=(h.after[2].sum/h.after[2].counter).toFixed(2)),p[3]&&h.after[3].counter&&(T["Lower Extremity Functional Scale"]=(h.after[3].sum/h.after[3].counter).toFixed(2)),p[41]&&h.after[4].counter&&(T["Oswestry low back pain"]=(h.after[4].sum/h.after[4].counter).toFixed(2)),p[5]&&h.after[5].counter&&(T["EQ-5D"]=(h.after[5].sum/h.after[5].counter).toFixed(2)),p[6]&&h.after[6].counter&&(T["EQ-5D"]=(h.after[6].sum/h.after[6].counter).toFixed(2)),y.push(T);continue}D.push(r.a.createElement("tr",{key:b},c[t]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},F):r.a.createElement("td",{className:"after"},F),c[t]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},b):r.a.createElement("td",{className:"after"},b),p[1]?l[b][1]&&(l[b][1].Data>=0||l[b][1].Data<0)?c[t]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},l[b][1].Data.toFixed(2)):r.a.createElement("td",{className:"after"},l[b][1].Data.toFixed(2)):c[t]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},"-"):r.a.createElement("td",{className:"after"},"-"):null,p[2]?l[b][2]&&(l[b][2].Data>=0||l[b][2].Data<0)?c[t]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},l[b][2].Data.toFixed(2)):r.a.createElement("td",{className:"after"},l[b][2].Data.toFixed(2)):c[t]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},"-"):r.a.createElement("td",{className:"after"},"-"):null,p[3]?l[b][3]&&(l[b][3].Data>=0||l[b][3].Data<0)?c[t]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},l[b][3].Data.toFixed(2)):r.a.createElement("td",{className:"after"},l[b][3].Data.toFixed(2)):c[t]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},"-"):r.a.createElement("td",{className:"after"},"-"):null,p[4]?l[b][4]&&(l[b][4].Data>=0||l[b][4].Data<0)?c[t]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},l[b][4].Data.toFixed(2)):r.a.createElement("td",{className:"after"},l[b][4].Data.toFixed(2)):c[t]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},"-"):r.a.createElement("td",{className:"after"},"-"):null,p[5]?l[b][5]&&(l[b][5].Data>=0||l[b][5].Data<0)?c[t]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},l[b][5].Data.toFixed(2)):r.a.createElement("td",{className:"after"},l[b][5].Data.toFixed(2)):c[t]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},"-"):r.a.createElement("td",{className:"after"},"-"):null,p[6]?l[b][6]&&(l[b][6].Data>=0||l[b][6].Data<0)?c[t]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},l[b][6].Data.toFixed(2)):r.a.createElement("td",{className:"after"},l[b][6].Data.toFixed(2)):c[t]<this.props.date||!this.props.date?r.a.createElement("td",{className:"before"},"-"):r.a.createElement("td",{className:"after"},"-"):null))}T={},this.props.date&&(this.props.showDaily?T["\u05de\u05e1\u05e4\u05e8 \u05d9\u05d5\u05dd"]=F:this.props.weekly?T["\u05de\u05e1\u05e4\u05e8 \u05e9\u05d1\u05d5\u05e2"]=F:T["\u05de\u05e1\u05e4\u05e8 \u05d7\u05d5\u05d3\u05e9"]=F),T["\u05ea\u05d0\u05e8\u05d9\u05da"]=b,this.props.showDaily?(p[1]&&(l[b][1]>0||l[b][1]<=0)&&(T["Oswestry Disability Index"]=l[b][1]),p[2]&&(l[b][2]>0||l[b][2]<=0)&&(T["Neck Disability Index"]=l[b][2]),p[3]&&(l[b][3]>0||l[b][3]<=0)&&(T["Lower Extremity Functional Scale"]=l[b][3]),p[4]&&(l[b][4]>0||l[b][4]<=0)&&(T["Oswestry low back pain"]=l[b][4]),p[5]&&(l[b][5]>0||l[b][5]<=0)&&(T["EQ-5D"]=l[b][5]),p[6]&&(l[b][6]>0||l[b][6]<=0)&&(T["EQ-5D scale"]=l[b][6])):(p[1]&&l[b][1]&&l[b][1].counter&&(T["Oswestry Disability Index"]=l[b][1].Data.toFixed(2)),p[2]&&l[b][2]&&l[b][2].counter&&(T["Neck Disability Index"]=l[b][2].Data.toFixed(2)),p[3]&&l[b][3]&&l[b][3].counter&&(T["Lower Extremity Functional Scale"]=l[b][3].Data.toFixed(2)),p[4]&&l[b][4]&&l[b][4].counter&&(T["Oswestry low back pain"]=l[b][4].Data.toFixed(2)),p[5]&&l[b][5]&&l[b][5].counter&&(T["EQ-5D"]=l[b][5].Data.toFixed(2)),p[6]&&l[b][6]&&l[b][6].counter&&(T["EQ-5D scale"]=l[b][6].Data.toFixed(2))),y.push(T)}}}return r.a.createElement("div",null,this.props.ready?r.a.createElement("div",null,e?r.a.createElement("h4",null,"\u05dc\u05d0 \u05e7\u05d9\u05d9\u05dd \u05de\u05d9\u05d3\u05e2 \u05e2\u05dc \u05d4\u05de\u05e9\u05ea\u05de\u05e9"):r.a.createElement("div",null,r.a.createElement("table",{style:{width:"100%"},id:"per"},r.a.createElement("tbody",null,r.a.createElement("tr",null,this.props.showDaily?r.a.createElement("th",null,"\u05de\u05e1\u05e4\u05e8 \u05d9\u05d5\u05dd"):null,this.props.weekly?r.a.createElement("th",null,"\u05de\u05e1\u05e4\u05e8 \u05e9\u05d1\u05d5\u05e2"):null,this.props.monthly?r.a.createElement("th",null,"\u05de\u05e1\u05e4\u05e8 \u05d7\u05d5\u05d3\u05e9"):null,this.props.data.length>0?r.a.createElement("th",null,"\u05ea\u05d0\u05e8\u05d9\u05da"):null,p[1]?r.a.createElement("th",null,"Oswestry Disability Index"):null,p[2]?r.a.createElement("th",null,"Neck Disability Index"):null,p[3]?r.a.createElement("th",null,"Lower Extremity Functional Scale"):null,p[4]?r.a.createElement("th",null,"Oswestry low back pain"):null,p[5]?r.a.createElement("th",null,"EQ-5D"):null,p[6]?r.a.createElement("th",null,"EQ-5D scale"):null),D)),r.a.createElement(k,{csvData:y,fileName:this.props.name+" \u05e9\u05d0\u05dc\u05d5\u05e0\u05d9\u05dd \u05ea\u05e7\u05d5\u05e4\u05ea\u05d9\u05d9\u05dd"}))):null)}}]),s}(s.Component),T=function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this)).handleChange=s.handleChange.bind(Object(g.a)(s)),s.sort_by_key=function(e,t){return e.sort((function(e,a){var s=e[t],r=a[t];return s<r?-1:s>r?1:0}))},s}return Object(i.a)(a,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,s=t.value,r=t.type,n=t.checked;"checkbox"===r?this.setState(Object(m.a)({},a,n)):this.setState(Object(m.a)({},a,s))}},{key:"render",value:function(){if(this.props.ready){var e=!1;if(this.props.data&&this.props.data.length>0){var t,a=this.sort_by_key(this.props.data,"ValidTime"),s={},n={},l={},o=new Date(this.props.date),i={},c={},p={},h={},u=[],m=!1;if(this.props.weekly){var d=new Date(this.props.date).getDay(),f=new Date(this.props.date-864e5*d),b=new Date(f.getTime()+5184e5);t=f.toLocaleDateString("en-GB",{day:"numeric"})+" - "+b.toLocaleDateString("en-GB",{day:"numeric",month:"short"})}this.props.monthly&&(t=new Date(this.props.date).toLocaleDateString("en-GB",{month:"short"}));var g={before:{light:{},deep:{},total:{}},after:{light:{},deep:{},total:{}}};g.before.light={sum:0,counter:0},g.before.deep={sum:0,counter:0},g.before.total={sum:0,counter:0},g.after.total={sum:0,counter:0},g.after.deep={sum:0,counter:0},g.after.light={sum:0,counter:0};for(var w=0;w<a.length;w++){for(var E,D=new Date(a[w].ValidTime),y=0,v=0,N=0,x=0;x<a[w].Data.length;x++){if(0===x)E=a[w].Data[x].StartTime;else if(E===a[w].Data[x].StartTime)break;var k=a[w].Data[x].EndTime-a[w].Data[x].StartTime;k/=36e5,"SLEEP_LIGHT"===a[w].Data[x].State?v+=k:y+=k,N+=k}if(this.props.showDaily){var A=D.toLocaleDateString("en-GB",{day:"numeric",month:"short"}).replace(/ /g,"-");D<=o&&(s[A]=y.toFixed(2),n[A]=v.toFixed(2),l[A]=N.toFixed(2)),D>=o&&(i[A]=y.toFixed(2),c[A]=v.toFixed(2),p[A]=N.toFixed(2))}else if(this.props.weekly){var S=(D=new Date(a[w].ValidTime)).getDay(),C=new Date(a[w].ValidTime-864e5*S),O=new Date(C.getTime()+5184e5);t===(A=C.toLocaleDateString("en-GB",{day:"numeric"})+" - "+O.toLocaleDateString("en-GB",{day:"numeric",month:"short"}))?(a[w].ValidTime<this.props.date?(g.before.light.counter++,g.before.light.sum+=v,g.before.deep.counter++,g.before.deep.sum+=y,g.before.total.counter++,g.before.total.sum+=N):(g.after.light.counter++,g.after.light.sum+=v,g.after.deep.counter++,g.after.deep.sum+=y,g.after.total.counter++,g.after.total.sum+=N),m||(m=!0,u.push(a[w].ValidTime))):(null==h[A]&&(h[A]={},h[A].light={},h[A].deep={},h[A].total={},h[A].light.counter=0,h[A].light.sum=0,h[A].deep.counter=0,h[A].deep.sum=0,h[A].total.counter=0,h[A].total.sum=0,u.push(a[w].ValidTime)),h[A].light.counter++,h[A].light.sum+=v,h[A].deep.counter++,h[A].deep.sum+=y,h[A].total.counter++,h[A].total.sum+=N)}else this.props.monthly&&(t===(A=(D=new Date(a[w].ValidTime)).toLocaleDateString("en-GB",{month:"short"}))?(a[w].ValidTime<this.props.date?(g.before.light.counter++,g.before.light.sum+=v,g.before.deep.counter++,g.before.deep.sum+=y,g.before.total.counter++,g.before.total.sum+=N):(g.after.light.counter++,g.after.light.sum+=v,g.after.deep.counter++,g.after.deep.sum+=y,g.after.total.counter++,g.after.total.sum+=N),m||(m=!0,u.push(a[w].ValidTime))):(null==h[A]&&(h[A]={},h[A].light={},h[A].deep={},h[A].total={},h[A].light.counter=0,h[A].light.sum=0,h[A].deep.counter=0,h[A].deep.sum=0,h[A].total.counter=0,h[A].total.sum=0,u.push(a[w].ValidTime)),h[A].light.counter++,h[A].light.sum+=v,h[A].deep.counter++,h[A].deep.sum+=y,h[A].total.counter++,h[A].total.sum+=N))}if(u=u.sort(),this.props.weekly||this.props.monthly)for(w=0;w<u.length;w++)D=new Date(u[w]),this.props.weekly?(S=D.getDay(),C=new Date(D.getTime()-864e5*S),O=new Date(C.getTime()+5184e5),A=C.toLocaleDateString("en-GB",{day:"numeric"})+" - "+O.toLocaleDateString("en-GB",{day:"numeric",month:"short"})):A=D.toLocaleDateString("en-GB",{month:"short"}),A!==t?(D<=o&&(s[A]=(h[A].deep.sum/h[A].deep.counter).toFixed(2),n[A]=(h[A].light.sum/h[A].light.counter).toFixed(2),l[A]=(h[A].total.sum/h[A].total.counter).toFixed(2)),D>=o&&(i[A]=(h[A].deep.sum/h[A].deep.counter).toFixed(2),c[A]=(h[A].light.sum/h[A].light.counter).toFixed(2),p[A]=(h[A].total.sum/h[A].total.counter).toFixed(2))):(s[A]=(g.before.deep.sum/g.before.deep.counter).toFixed(2),n[A]=(g.before.light.sum/g.before.light.counter).toFixed(2),l[A]=(g.before.total.sum/g.before.total.counter).toFixed(2),i[A]=(g.after.deep.sum/g.after.deep.counter).toFixed(2),c[A]=(g.after.light.sum/g.after.light.counter).toFixed(2),p[A]=(g.after.total.sum/g.after.total.counter).toFixed(2));var T=[{name:"\u05e9\u05e2\u05d5\u05ea \u05e9\u05d9\u05e0\u05d4 \u05e7\u05dc\u05d4 \u05dc\u05e4\u05e0\u05d9 \u05d4\u05e0\u05d9\u05ea\u05d5\u05d7",data:n},{name:"\u05e9\u05e2\u05d5\u05ea \u05e9\u05d9\u05e0\u05d4 \u05e2\u05de\u05d5\u05e7\u05d4 \u05dc\u05e4\u05e0\u05d9 \u05d4\u05e0\u05d9\u05ea\u05d5\u05d7",data:s},{name:"\u05e1\u05da \u05db\u05dc \u05e9\u05e2\u05d5\u05ea \u05d4\u05e9\u05d9\u05e0\u05d4 \u05dc\u05e4\u05e0\u05d9 \u05d4\u05e0\u05d9\u05ea\u05d5\u05d7",data:l},{name:"\u05e9\u05e2\u05d5\u05ea \u05e9\u05d9\u05e0\u05d4 \u05e7\u05dc\u05d4 \u05d0\u05d7\u05e8\u05d9 \u05d4\u05e0\u05d9\u05ea\u05d5\u05d7",data:c},{name:"\u05e9\u05e2\u05d5\u05ea \u05e9\u05d9\u05e0\u05d4 \u05e2\u05de\u05d5\u05e7\u05d4 \u05d0\u05d7\u05e8\u05d9 \u05d4\u05e0\u05d9\u05ea\u05d5\u05d7",data:i},{name:"\u05e1\u05da \u05db\u05dc \u05e9\u05e2\u05d5\u05ea \u05d4\u05e9\u05d9\u05e0\u05d4 \u05d0\u05d7\u05e8\u05d9 \u05d4\u05e0\u05d9\u05ea\u05d5\u05d7",data:p}]}else e=!0}return r.a.createElement("div",null,this.props.ready?r.a.createElement("div",null,r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,this.props.name),e?r.a.createElement("h4",null,"\u05dc\u05d0 \u05e7\u05d9\u05d9\u05dd \u05de\u05d9\u05d3\u05e2 \u05e2\u05dc \u05d4\u05de\u05e9\u05ea\u05de\u05e9"):r.a.createElement(I.a,{download:!0,data:T,colors:["#010C6B","#7C0000","#0D4E00","#77CCEE","#F78989","#B5FFA2"],min:0}))):null)}}]),a}(s.Component),j=function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this)).handleChange=s.handleChange.bind(Object(g.a)(s)),s.sort_by_key=function(e,t){return e.sort((function(e,a){var s=e[t],r=a[t];return s<r?-1:s>r?1:0}))},s}return Object(i.a)(a,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,s=t.value,r=t.type,n=t.checked;"checkbox"===r?this.setState(Object(m.a)({},a,n)):this.setState(Object(m.a)({},a,s))}},{key:"render",value:function(){if(this.props.ready){var e=!1;if(this.props.data.length>0){var t,a=this.sort_by_key(this.props.data,"ValidTime"),s={},n=new Date(this.props.date),l={},o={},i=[],c=!1;if(this.props.weekly){var p=new Date(this.props.date).getDay(),h=new Date(this.props.date-864e5*p),u=new Date(h.getTime()+5184e5);t=h.toLocaleDateString("en-GB",{day:"numeric"})+" - "+u.toLocaleDateString("en-GB",{day:"numeric",month:"short"})}this.props.monthly&&(t=new Date(this.props.date).toLocaleDateString("en-GB",{month:"short"}));for(var m={before:{sum:0,counter:0},after:{sum:0,counter:0}},d=0;d<a.length;d++)if(this.props.showDaily){var f=new Date(a[d].ValidTime),b=f.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}).replace(/ /g,"-");f<=n&&(s[b]=a[d].Answers[0].AnswerID[0].toFixed(2)),f>=n&&(l[b]=a[d].Answers[0].AnswerID[0].toFixed(2))}else if(this.props.weekly){var g=(f=new Date(a[d].ValidTime)).getDay(),w=new Date(a[d].ValidTime-864e5*g),E=new Date(w.getTime()+5184e5);t===(b=w.toLocaleDateString("en-GB",{day:"numeric"})+" - "+E.toLocaleDateString("en-GB",{day:"numeric",month:"short"}))?(a[d].ValidTime<this.props.date?(m.before.counter++,m.before.sum+=a[d].Answers[0].AnswerID[0]):(m.after.counter++,m.after.sum+=a[d].Answers[0].AnswerID[0]),c||(c=!0,i.push(a[d].ValidTime))):(null==o[b]&&(o[b]={},o[b].counter=0,o[b].sum=0,i.push(a[d].ValidTime)),o[b].sum+=a[d].Answers[0].AnswerID[0],o[b].counter++)}else this.props.monthly&&(t===(b=(f=new Date(a[d].ValidTime)).toLocaleDateString("en-GB",{month:"short"}))?(a[d].ValidTime<this.props.date?(m.before.counter++,m.before.sum+=a[d].Answers[0].AnswerID[0]):(m.after.counter++,m.after.sum+=a[d].Answers[0].AnswerID[0]),c||(c=!0,i.push(a[d].ValidTime))):(null==o[b]&&(o[b]={},o[b].counter=0,o[b].sum=0,i.push(a[d].ValidTime)),o[b].sum+=a[d].Answers[0].AnswerID[0],o[b].counter++));if(i=i.sort(),this.props.weekly||this.props.monthly)for(d=0;d<i.length;d++)f=new Date(i[d]),this.props.weekly?(g=f.getDay(),w=new Date(f.getTime()-864e5*g),E=new Date(w.getTime()+5184e5),b=w.toLocaleDateString("en-GB",{day:"numeric"})+" - "+E.toLocaleDateString("en-GB",{day:"numeric",month:"short"})):b=f.toLocaleDateString("en-GB",{month:"short"}),b!==t?(f<=n&&(s[b]=(o[b].sum/o[b].counter).toFixed(2)),f>=n&&(l[b]=(o[b].sum/o[b].counter).toFixed(2))):(s[b]=(m.before.sum/m.before.counter).toFixed(2),l[b]=(m.after.sum/m.after.counter).toFixed(2));var D=[{name:"\u05dc\u05e4\u05e0\u05d9 \u05d4\u05e0\u05d9\u05ea\u05d5\u05d7",data:s},{name:"\u05d0\u05d7\u05e8\u05d9 \u05d4\u05e0\u05d9\u05ea\u05d5\u05d7",data:l}]}else e=!0}return r.a.createElement("div",null,this.props.ready?r.a.createElement("div",null,r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,this.props.name),e?r.a.createElement("h4",null,"\u05dc\u05d0 \u05e7\u05d9\u05d9\u05dd \u05de\u05d9\u05d3\u05e2 \u05e2\u05dc \u05d4\u05de\u05e9\u05ea\u05de\u05e9"):r.a.createElement(I.a,{download:!0,data:D,min:0}))):null)}}]),a}(s.Component),F=function(e){Object(c.a)(s,e);var t=Object(p.a)(s);function s(e){var a;Object(o.a)(this,s),a=t.call(this);for(var r=!1,n=!1,l=!1,i=!1,c=0;c<e.user.Questionnaires.length;c++)1===e.user.Questionnaires[c].QuestionnaireID?r=!0:2===e.user.Questionnaires[c].QuestionnaireID?n=!0:3===e.user.Questionnaires[c].QuestionnaireID?l=!0:5===e.user.Questionnaires[c].QuestionnaireID&&(i=!0);return a.state={user:e.user,showPopup:!1,showPopupQ:!1,new_date:"",Questionnaires:[],quest1:!1,quest2:r,quest3:n,quest4:l,quest5:i,quest6:!1},a.changeDate=a.changeDate.bind(Object(g.a)(a)),a.togglePopup=a.togglePopup.bind(Object(g.a)(a)),a.handleChange=a.handleChange.bind(Object(g.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(g.a)(a)),a.togglePopupQ=a.togglePopupQ.bind(Object(g.a)(a)),a.handleSubmitQ=a.handleSubmitQ.bind(Object(g.a)(a)),a}return Object(i.a)(s,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=new Date(this.state.new_date).getTime(),s=this.props.user.UserID;E.a.post("https://icc.ise.bgu.ac.il/njsw03auth/usersAll/changeDateOfSurgery",{UserID:s,DateOfSurgery:a},{headers:{"Content-Type":"application/json","x-auth-token":sessionStorage.getItem("token")}}).then((function(e){window.alert("\u05d4\u05ea\u05d0\u05e8\u05d9\u05da \u05e9\u05d5\u05e0\u05d4 \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4"),t.togglePopup()}))}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,s=t.value,r=t.type,n=t.checked;"checkbox"===r?this.setState(Object(m.a)({},a,n)):this.setState(Object(m.a)({},a,s))}},{key:"handleSubmitQ",value:function(e){var t=this;e.preventDefault();var a=[];this.state.quest2&&a.push({QuestionnaireID:1,QuestionnaireText:"\u05ea\u05e4\u05e7\u05d5\u05d3 \u05d2\u05d1 \u05ea\u05d7\u05ea\u05d5\u05df"}),this.state.quest3&&a.push({QuestionnaireID:2,QuestionnaireText:"\u05ea\u05e4\u05e7\u05d5\u05d3 \u05e6\u05d5\u05d5\u05d0\u05e8"}),this.state.quest4&&a.push({QuestionnaireID:3,QuestionnaireText:"\u05ea\u05e4\u05e7\u05d5\u05d3 \u05d2\u05e3 \u05ea\u05d7\u05ea\u05d5\u05df"}),this.state.quest5&&a.push({QuestionnaireID:5,QuestionnaireText:"\u05d0\u05d9\u05db\u05d5\u05ea \u05d7\u05d9\u05d9\u05dd"});var s=this.props.user.UserID;E.a.post("https://icc.ise.bgu.ac.il/njsw03auth/usersAll/changeUserQuestionnaire",{UserID:s,Questionnaires:a},{headers:{"Content-Type":"application/json","x-auth-token":sessionStorage.getItem("token")}}).then((function(e){window.alert("\u05d4\u05e9\u05d0\u05dc\u05d5\u05e0\u05d9\u05dd \u05e9\u05d5\u05e0\u05d5 \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4"),t.togglePopupQ()}))}},{key:"changeQuest",value:function(){this.togglePopupQ()}},{key:"changeDate",value:function(){this.togglePopup()}},{key:"togglePopupQ",value:function(){this.setState({showPopupQ:!this.state.showPopupQ})}},{key:"togglePopup",value:function(){this.setState({showPopup:!this.state.showPopup})}},{key:"render",value:function(){var e=this;a(85);var t=this.props.user.First_Name+" "+this.props.user.Last_Name,s=parseFloat(this.props.user.BMI).toFixed(1),n="";n=this.props.user.DateOfSurgery?new Date(this.props.user.DateOfSurgery).toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"\u05dc\u05d0 \u05e0\u05e7\u05d1\u05e2 \u05d9\u05d5\u05dd \u05e0\u05d9\u05ea\u05d5\u05d7";for(var l=this.props.user.Gender,o=this.props.user.Height,i=this.props.user.Phone_Number,c=this.props.user.Smoke,p=this.props.user.SurgeryType,h=this.props.user.Weight,u=new Date,m=new Date(this.props.user.BirthDate),d=Math.floor((u.getTime()-m.getTime())/31536e6),f="",b=!0,g=0;g<this.props.user.Questionnaires.length;g++)0!==this.props.user.Questionnaires[g].QuestionnaireID&&6!==this.props.user.Questionnaires[g].QuestionnaireID&&(b?b=!1:f+=", ",f.includes(this.props.user.Questionnaires[g].QuestionnaireText)||(f+=this.props.user.Questionnaires[g].QuestionnaireText));" "===f.charAt(f.length-1)&&(f=f.substring(0,f.length-2));var w="g";return this.props.table&&(w="t"),r.a.createElement("div",{id:"data",className:w},r.a.createElement("div",{className:"line"},r.a.createElement("label",{className:"label"},"\u05e9\u05dd:"),r.a.createElement("label",{className:"labelData"},t),r.a.createElement("label",{className:"label"},"\u05de\u05e1\u05e4\u05e8 \u05d8\u05dc\u05e4\u05d5\u05df:"),r.a.createElement("label",{className:"labelData"},i)),r.a.createElement("div",{className:"line"},r.a.createElement("label",{className:"label"},"\u05de\u05d9\u05df:"),r.a.createElement("label",{className:"labelData"},l),r.a.createElement("label",{className:"label"},"\u05de\u05e9\u05e7\u05dc:"),r.a.createElement("label",{className:"labelData"},h),r.a.createElement("label",{className:"label"},"\u05d2\u05d5\u05d1\u05d4:"),r.a.createElement("label",{className:"labelData"},o),r.a.createElement("label",{className:"label"},"\u05d2\u05d9\u05dc:"),r.a.createElement("label",{className:"labelData"},d),r.a.createElement("label",{className:"label"},"BMI:"),r.a.createElement("label",{className:"labelData"},s),r.a.createElement("label",{className:"labelData"},c)),r.a.createElement("div",{className:"line"},r.a.createElement("label",{className:"label"},"\u05e1\u05d5\u05d2 \u05e0\u05d9\u05ea\u05d5\u05d7:"),r.a.createElement("label",{className:"labelData"},p),r.a.createElement("label",{className:"label"},"\u05ea\u05d0\u05e8\u05d9\u05da \u05e0\u05d9\u05ea\u05d5\u05d7:"),r.a.createElement("label",{className:"labelData"},n),r.a.createElement("button",{className:"changeDate",onClick:function(){return e.changeDate()}},"\u05e9\u05d9\u05e0\u05d5\u05d9 \u05d4\u05ea\u05d0\u05e8\u05d9\u05da")),r.a.createElement("div",{className:"line"},r.a.createElement("label",{className:"label"},"\u05e9\u05d0\u05dc\u05d5\u05e0\u05d9\u05dd:"),r.a.createElement("label",{className:"labelData"},f," "),r.a.createElement("button",{className:"changeDate",onClick:function(){return e.changeQuest()}},"\u05e9\u05d9\u05e0\u05d5\u05d9 \u05d4\u05e9\u05d0\u05dc\u05d5\u05e0\u05d9\u05dd")),this.state.showPopup?r.a.createElement(_,{closePopup:this.togglePopup.bind(this),handleChange:this.handleChange.bind(this),handleSubmit:this.handleSubmit.bind(this)}):null,this.state.showPopupQ?r.a.createElement(Q,{closePopup:this.togglePopupQ.bind(this),handleChange:this.handleChange.bind(this),handleSubmit:this.handleSubmitQ.bind(this),quest1:this.state.quest1,quest2:this.state.quest2,quest3:this.state.quest3,quest4:this.state.quest4,quest5:this.state.quest5,quest6:this.state.quest6}):null)}}]),s}(s.Component),_=function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"popup"},r.a.createElement("div",{className:"popup_innerCD"},r.a.createElement("div",{className:"line_x"},r.a.createElement("button",{onClick:this.props.closePopup,id:"x"},"x")),r.a.createElement("h4",{id:"h4C"},"\u05e9\u05d9\u05e0\u05d5\u05d9 \u05ea\u05d0\u05e8\u05d9\u05da \u05d4\u05e0\u05d9\u05ea\u05d5\u05d7"),r.a.createElement("form",{onSubmit:this.props.handleSubmit,id:"newDate_form"},r.a.createElement("div",{className:"line_newData"},r.a.createElement("label",{id:"newD"}," \u05d4\u05db\u05e0\u05e1 \u05ea\u05d0\u05e8\u05d9\u05da \u05e0\u05d9\u05ea\u05d5\u05d7 \u05d7\u05d3\u05e9:")),r.a.createElement("div",{className:"line_newData"},r.a.createElement("input",{id:"new_date",type:"date",name:"new_date",onChange:this.props.handleChange})),r.a.createElement("div",{className:"line_newData"},r.a.createElement("button",{id:"sumbitC",type:"sumbit"},"\u05e9\u05d9\u05e0\u05d5\u05d9")),r.a.createElement("div",{className:"line_newData"},r.a.createElement("label",{id:"noDate"},"*\u05dc\u05d1\u05d9\u05d8\u05d5\u05dc \u05ea\u05d0\u05e8\u05d9\u05da \u05e0\u05d9\u05ea\u05d5\u05d7 \u05d9\u05e9 \u05dc\u05dc\u05d7\u05d5\u05e5 \u05e2\u05dc \u05e9\u05d9\u05e0\u05d5\u05d9 \u05d1\u05dc\u05d9 \u05e7\u05d1\u05d9\u05e2\u05ea \u05ea\u05d0\u05e8\u05d9\u05da \u05d7\u05d3\u05e9")))))}}]),a}(r.a.Component),Q=function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"popup"},r.a.createElement("div",{className:"popup_innerCQ"},r.a.createElement("div",{className:"line_x"},r.a.createElement("button",{onClick:this.props.closePopup,id:"x"},"x")),r.a.createElement("h4",{id:"h4C"},"\u05e9\u05d9\u05e0\u05d5\u05d9 \u05e9\u05d0\u05dc\u05d5\u05e0\u05d9\u05dd"),r.a.createElement("form",{id:"formQ",onSubmit:this.props.handleSubmit},r.a.createElement("div",{className:"line"},r.a.createElement("input",{type:"checkbox",className:"cInput",name:"quest2",checked:this.props.quest2,onChange:this.props.handleChange}),r.a.createElement("label",{className:"mLabel"},"\u05ea\u05e4\u05e7\u05d5\u05d3 \u05d2\u05d1 \u05ea\u05d7\u05ea\u05d5\u05df")),r.a.createElement("div",{className:"line"},r.a.createElement("input",{type:"checkbox",className:"cInput",name:"quest3",checked:this.props.quest3,onChange:this.props.handleChange}),r.a.createElement("label",{className:"mLabel"},"\u05ea\u05e4\u05e7\u05d5\u05d3 \u05e6\u05d5\u05d5\u05d0\u05e8")),r.a.createElement("div",{className:"line"},r.a.createElement("input",{type:"checkbox",className:"cInput",name:"quest4",checked:this.props.quest4,onChange:this.props.handleChange}),r.a.createElement("label",{className:"mLabel"},"\u05ea\u05e4\u05e7\u05d5\u05d3 \u05d2\u05e3 \u05ea\u05d7\u05ea\u05d5\u05df")),r.a.createElement("div",{className:"line"},r.a.createElement("input",{type:"checkbox",className:"cInput",name:"quest5",checked:this.props.quest5,onChange:this.props.handleChange}),r.a.createElement("label",{className:"mLabel"},"\u05d0\u05d9\u05db\u05d5\u05ea \u05d7\u05d9\u05d9\u05dd")),r.a.createElement("button",{id:"changeQ",type:"sumbit"},"\u05e9\u05d9\u05e0\u05d5\u05d9"))))}}]),a}(r.a.Component),L=function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this)).state={graph:!0,table:!1},s.styleLabel={fontSize:"calc(10px)",color:"black",margin:"2vmin 2vmin 2vmin 2vmin"},s.handleChange=s.handleChange.bind(Object(g.a)(s)),s.clean=function(e){for(var t={},a=[],s=0;s<e.length;s++){var r=new Date(e[s].ValidTime).toLocaleDateString("en-GB",{day:"numeric",month:"short"}).replace(/ /g,"-");void 0===t[r]&&(t[r]=e[s],a.push(e[s]))}return a},s}return Object(i.a)(a,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,s=t.value,r=t.type,n=t.checked;"checkbox"===r?this.setState(Object(m.a)({graph:!1,table:!1},a,n)):this.setState(Object(m.a)({},a,s))}},{key:"render",value:function(){for(var e,t,a,s,n,l=[],o=[],i=[],c=[],p=[],h=[],u=0;u<this.props.dataArr.length;u++)if("\u05e6\u05e2\u05d3\u05d9\u05dd"===this.props.dataArr[u].name)e=this.props.dataArr[u].values;else if("\u05de\u05e8\u05d7\u05e7"===this.props.dataArr[u].name)t=this.props.dataArr[u].values;else if("\u05e7\u05dc\u05d5\u05e8\u05d9\u05d5\u05ea"===this.props.dataArr[u].name)a=this.props.dataArr[u].values;else if("\u05de\u05d6\u05d2 \u05d4\u05d0\u05d5\u05d5\u05d9\u05e8"===this.props.dataArr[u].name){if(this.props.dataArr[u].values.length&&this.props.dataArr[u].values[0].Data&&this.props.dataArr[u].values[0].Data.High)for(var m=0;m<this.props.dataArr[u].values.length;m++)this.props.dataArr[u].values[m].Data=this.props.dataArr[u].values[m].Data.High;s=this.props.dataArr[u].values}else"\u05e9\u05e2\u05d5\u05ea \u05e9\u05d9\u05e0\u05d4"===this.props.dataArr[u].name&&(n=this.props.dataArr[u].values);for(u=0;u<this.props.periodicAnswers.length;u++){if(1===this.props.periodicAnswers[u].QuestionnaireID)for(l=this.props.periodicAnswers[u].data,m=0;m<l.length;m++)l[m].Data=l[m].Score;if(2===this.props.periodicAnswers[u].QuestionnaireID)for(o=this.props.periodicAnswers[u].data,m=0;m<o.length;m++)o[m].Data=o[m].Score;if(3===this.props.periodicAnswers[u].QuestionnaireID)for(i=this.props.periodicAnswers[u].data,m=0;m<i.length;m++)i[m].Data=i[m].Score;if(4===this.props.periodicAnswers[u].QuestionnaireID)for(c=this.props.periodicAnswers[u].data,m=0;m<c.length;m++)c[m].Data=c[m].Score;if(5===this.props.periodicAnswers[u].QuestionnaireID)for(p=this.props.periodicAnswers[u].data,m=0;m<p.length;m++)p[m].Data=p[m].Score;if(6===this.props.periodicAnswers[u].QuestionnaireID)for(h=this.props.periodicAnswers[u].data,m=0;m<h.length;m++)h[m].Data=h[m].Score}return r.a.createElement("div",null,r.a.createElement("div",{className:"display"},this.props.dataArr.length>0||this.props.dailyA.length>0?r.a.createElement("div",null,r.a.createElement("div",{className:"checkButton",id:"cbRight"},r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",value:"1",name:"graph",checked:this.state.graph,onChange:this.handleChange}),r.a.createElement("span",null,r.a.createElement("div",{id:"text"},"\u05d4\u05e6\u05d2 \u05de\u05d9\u05d3\u05e2 \u05d2\u05e8\u05e4\u05d9")))),r.a.createElement("div",{className:"checkButton",id:"cbLeft"},r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",value:"1",name:"table",checked:this.state.table,onChange:this.handleChange}),r.a.createElement("span",null,r.a.createElement("div",{id:"text"},"\u05d4\u05e6\u05d2 \u05de\u05d9\u05d3\u05e2 \u05d8\u05d1\u05dc\u05d0\u05d9"))))," "):null),r.a.createElement("br",null),r.a.createElement("br",null),(this.state.graph||this.state.table)&&this.props.ready?r.a.createElement(F,{user:this.props.user,table:this.state.table}):null,this.state.table&&this.props.dataArr.length>0&&this.props.ready?r.a.createElement("h3",null,"\u05de\u05d3\u05d3\u05d9\u05dd"):null,this.state.table?r.a.createElement("div",{className:"ex1"},r.a.createElement(A,{dataArr:this.props.dataArr,steps:this.props.steps,distance:this.props.distance,calories:this.props.calories,weather:this.props.weather,sleep:this.props.sleep,date:this.props.date,showDaily:this.props.showDaily,weekly:this.props.weekly,monthly:this.props.monthly,name:this.props.name,ready:this.props.ready})," "):null,r.a.createElement("br",null),this.state.table&&this.props.dailyQ&&this.props.ready?r.a.createElement("h3",null,"\u05e9\u05d0\u05dc\u05d5\u05df \u05d9\u05d5\u05de\u05d9"):null,this.state.table&&this.props.dailyQ?r.a.createElement(S,{data:this.props.dailyA,date:this.props.date,showDaily:this.props.showDaily,weekly:this.props.weekly,monthly:this.props.monthly,name:this.props.name,ready:this.props.ready}):null,this.state.table&&this.props.perQ&&this.props.ready?r.a.createElement("h3",null,"\u05e9\u05d0\u05dc\u05d5\u05e0\u05d9\u05dd \u05ea\u05e7\u05d5\u05e4\u05ea\u05d9\u05d9\u05dd"):null,this.state.table&&this.props.perQ?r.a.createElement(O,{data:this.props.periodicAnswers,date:this.props.date,showDaily:this.props.showDaily,weekly:this.props.weekly,monthly:this.props.monthly,ready:this.props.ready,name:this.props.name}):null,this.state.graph&&this.props.steps?r.a.createElement(C,{data:e,date:this.props.date,name:"\u05e6\u05e2\u05d3\u05d9\u05dd",showDaily:this.props.showDaily,weekly:this.props.weekly,monthly:this.props.monthly,ready:this.props.ready}):null,this.state.graph&&this.props.distance?r.a.createElement(C,{data:t,date:this.props.date,name:"\u05de\u05e8\u05d7\u05e7",showDaily:this.props.showDaily,weekly:this.props.weekly,monthly:this.props.monthly,ready:this.props.ready}):null,this.state.graph&&this.props.calories?r.a.createElement(C,{data:a,date:this.props.date,name:"\u05e7\u05dc\u05d5\u05e8\u05d9\u05d5\u05ea",showDaily:this.props.showDaily,weekly:this.props.weekly,monthly:this.props.monthly,ready:this.props.ready}):null,this.state.graph&&this.props.weather?r.a.createElement(C,{data:s,date:this.props.date,name:"\u05de\u05d6\u05d2 \u05d4\u05d0\u05d5\u05d5\u05d9\u05e8",showDaily:this.props.showDaily,weekly:this.props.weekly,monthly:this.props.monthly,ready:this.props.ready}):null,this.state.graph&&this.props.sleep?r.a.createElement(T,{data:n,date:this.props.date,name:"\u05e9\u05e2\u05d5\u05ea \u05e9\u05d9\u05e0\u05d4",showDaily:this.props.showDaily,weekly:this.props.weekly,monthly:this.props.monthly,ready:this.props.ready}):null,this.state.graph&&this.props.dailyQ?r.a.createElement(j,{data:this.props.dailyA,date:this.props.date,name:"\u05e9\u05d0\u05dc\u05d5\u05df \u05d9\u05d5\u05de\u05d9",showDaily:this.props.showDaily,weekly:this.props.weekly,monthly:this.props.monthly,ready:this.props.ready}):null,this.state.graph&&l.length>0&&this.props.perQ?r.a.createElement(C,{data:l,date:this.props.date,name:"Oswestry Disability Index",showDaily:this.props.showDaily,weekly:this.props.weekly,monthly:this.props.monthly,ready:this.props.ready}):null,this.state.graph&&o.length>0&&this.props.perQ?r.a.createElement(C,{data:o,date:this.props.date,name:"Neck Disability Index",showDaily:this.props.showDaily,weekly:this.props.weekly,monthly:this.props.monthly,ready:this.props.ready}):null,this.state.graph&&i.length>0&&this.props.perQ?r.a.createElement(C,{data:i,date:this.props.date,name:"Lower Extremity Functional Scale",showDaily:this.props.showDaily,weekly:this.props.weekly,monthly:this.props.monthly,ready:this.props.ready}):null,this.state.graph&&c.length>0&&this.props.perQ?r.a.createElement(C,{data:c,date:this.props.date,name:"Oswestry low back pain",showDaily:this.props.showDaily,weekly:this.props.weekly,monthly:this.props.monthly,ready:this.props.ready}):null,this.state.graph&&p.length>0&&this.props.perQ?r.a.createElement(C,{data:p,date:this.props.date,name:"EQ-5D",showDaily:this.props.showDaily,weekly:this.props.weekly,monthly:this.props.monthly,ready:this.props.ready}):null,this.state.graph&&h.length>0&&this.props.perQ?r.a.createElement(C,{data:h,date:this.props.date,name:"EQ-5D scale",showDaily:this.props.showDaily,weekly:this.props.weekly,monthly:this.props.monthly,ready:this.props.ready}):null)}}]),a}(s.Component),P=function(e){Object(c.a)(s,e);var t=Object(p.a)(s);function s(){var e;Object(o.a)(this,s),e=t.call(this);var a=(new Date).toISOString().split("T")[0],n=[],l=[];return E.a.get("https://icc.ise.bgu.ac.il/njsw03auth/usersAll/getFirsts",{headers:{"Content-Type":"application/json","x-auth-token":sessionStorage.getItem("token")}}).then((function(e){if(e.data.data){var t=e.data.data.map((function(e,t){return e.trim()}));t=t.sort();for(var a=Array.from(new Set(t)),s=0;s<a.length;s++)n.push(r.a.createElement("option",{key:a[s]},a[s]))}})),E.a.get("https://icc.ise.bgu.ac.il/njsw03auth/usersAll/getLasts",{headers:{"Content-Type":"application/json","x-auth-token":sessionStorage.getItem("token")}}).then((function(e){if(e.data.data){var t=e.data.data.map((function(e,t){return e.trim()}));t=t.sort();for(var a=Array.from(new Set(t)),s=0;s<a.length;s++)l.push(r.a.createElement("option",{key:a[s]},a[s]))}})),e.state={pName:"",fName:"",end_date:a,start_date:"2020-01-01",steps:!0,distance:!0,weather:!0,calories:!0,sleeping_hours:!0,dataArr:[],periodicAnswers:[],showPopup:!1,textPopup:[],dailyA:[],numOfUsers:0,dailyQ:!0,perQ:!0,x:[],date:0,showDaily:!0,weekly:!1,monthly:!1,user:{},ready:!1,todayDate:a,optionsPName:n,optionsLName:l,className:"normal"},e.handleChange=e.handleChange.bind(Object(g.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(g.a)(e)),e.getRequest=e.getRequest.bind(Object(g.a)(e)),e.togglePopup=e.togglePopup.bind(Object(g.a)(e)),e.selectUser=e.selectUser.bind(Object(g.a)(e)),e}return Object(i.a)(s,[{key:"togglePopup",value:function(){this.setState({showPopup:!this.state.showPopup})}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,s=t.value,r=t.type,n=t.checked;"checkbox"===r?this.setState(Object(m.a)({},a,n)):this.setState(Object(m.a)({},a,s)),"showDaily"===a?this.setState({showDaily:!0,weekly:!1,monthly:!1}):"weekly"===a?this.setState({showDaily:!1,weekly:!0,monthly:!1}):"monthly"===a&&this.setState({showDaily:!1,weekly:!1,monthly:!0})}},{key:"getRequest",value:function(){var e=Object(b.a)(f.a.mark((function e(t,a){var s,r,n,l,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s="https://icc.ise.bgu.ac.il/njsw03auth/doctors/"+a+"?FirstName="+this.state.pName.trim()+"&LastName="+this.state.fName.trim(),""!==this.state.start_date&&(r=new Date(this.state.start_date),n=r.getTime(),s+="&start_time="+n),""!==this.state.end_date&&(r=new Date(this.state.end_date),r=new Date(r.getTime()+864e5),l=r.getTime(),s+="&end_time="+l),e.next=5,E.a.get(s,{headers:{"Content-Type":"application/json","x-auth-token":sessionStorage.getItem("token")}});case 5:if("Not Found"!==(o=e.sent).data.message){e.next=8;break}return e.abrupt("return",null);case 8:return e.abrupt("return",{values:o.data.data,name:t,numOfUsers:o.data.data.length});case 9:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"selectUser",value:function(){var e=Object(b.a)(f.a.mark((function e(t){var a,s,r,n,l,o,i,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=this.state.dataArr,s=this.state.dailyA,r=[],o=0;o<this.state.numOfUsers;o++)s[o]&&s[o].UserID.BirthDate===t&&(r=s[o].docs,l=s[o].UserID.DateOfSurgery,n=s[o].UserID);for(o=0;o<this.state.questionnaire.values.length;o++)this.state.questionnaire.values[o].UserID.BirthDate===t&&(this.state.periodicAnswers.push(this.state.questionnaire.values[o].docs),l=this.state.questionnaire.values[o].UserID.DateOfSurgery,n=this.state.questionnaire.values[o].UserID);for(o=0;o<a.length;o++)if(i=[],a[o]){for(c=0;c<a[o].values.length;c++)a[o].values[c].UserID.BirthDate===t&&(i=a[o].values[c].docs,l=a[o].values[c].UserID.DateOfSurgery,n=a[o].values[c].UserID);a[o].values=i}this.setState({dataArr:a,dailyA:r,date:l,user:n,ready:!0,className:"normal"}),this.state.showPopup&&this.togglePopup();case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleSubmit",value:function(){var e=Object(b.a)(f.a.mark((function e(t){var a,s,n,l,o,i,c,p,h,u,m=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t&&t.preventDefault(),this.setState({ready:!1,className:"waiting",periodicAnswers:[]}),a=0,s=[],n=0,e.next=7,this.getRequest("\u05e6\u05e2\u05d3\u05d9\u05dd","metrics/getSteps");case 7:if(l=e.sent){e.next=11;break}return window.alert("\u05dc\u05d0 \u05e7\u05d9\u05d9\u05dd \u05de\u05d8\u05d5\u05e4\u05dc"),e.abrupt("return");case 11:return l.values[0].docs.length>0&&s.push(l),l.numOfUsers>a&&(a=l.numOfUsers),e.next=15,this.getRequest("\u05de\u05e8\u05d7\u05e7","metrics/getDistance");case 15:return(l=e.sent).values[0].docs.length>0&&s.push(l),l.numOfUsers>a&&(a=l.numOfUsers),e.next=20,this.getRequest("\u05e7\u05dc\u05d5\u05e8\u05d9\u05d5\u05ea","metrics/getCalories");case 20:return(l=e.sent).values[0].docs.length>0&&s.push(l),l.numOfUsers>a&&(a=l.numOfUsers),e.next=25,this.getRequest("\u05de\u05d6\u05d2 \u05d4\u05d0\u05d5\u05d5\u05d9\u05e8","metrics/getWeather");case 25:return(l=e.sent).values[0].docs.length>0&&s.push(l),l.numOfUsers>a&&(a=l.numOfUsers),e.next=30,this.getRequest("\u05e9\u05e2\u05d5\u05ea \u05e9\u05d9\u05e0\u05d4","metrics/getSleep");case 30:return(l=e.sent).values[0].docs.length>0&&s.push(l),l.numOfUsers>a&&(a=l.numOfUsers),e.next=35,this.getRequest("\u05ea\u05e9\u05d5\u05d1\u05d5\u05ea \u05d9\u05d5\u05de\u05d9\u05d5\u05ea","answers/getDailyAnswers");case 35:return(l=e.sent).numOfUsers>a&&(a=l.numOfUsers),e.next=39,this.getRequest("\u05e9\u05d0\u05dc\u05d5\u05df \u05ea\u05e7\u05d5\u05e4\u05ea\u05d9","answers/getPeriodicAnswers");case 39:for(o=e.sent,i=0,c={},n=0;n<o.values.length;n++)c[o.values[n].UserID]||(c[o.values[n].UserID]=!0,i++);if(i>a&&(a=i),this.setState({dataArr:s,dailyA:l.values,numOfUsers:a,questionnaire:o}),1===a&&((p=this.state.dailyA[0].UserID.BirthDate)||(p=this.state.periodicAnswers[0].UserID.BirthDate),p||(p=this.state.dataArr[0][0].UserID.BirthDate),this.selectUser(p)),a>1){for(h=[],u=function(){var e=m.state.dailyA[n].UserID.BirthDate;e||(e=m.state.periodicAnswers[n].UserID.BirthDate),e||(e=m.state.dataArr[0][n].UserID.BirthDate);var t=new Date(e);m.state.x.push(t.toLocaleDateString("en-GB",{day:"numeric",month:"numeric",year:"numeric"})),h.push(r.a.createElement(y.a,{className:"card",key:m.state.x[n],onClick:function(){return m.selectUser(e)}},r.a.createElement(y.a.Body,{className:"cardBody"},"\u05e9\u05dd \u05e4\u05e8\u05d8\u05d9: ",m.state.pName.trim()," "),r.a.createElement(y.a.Body,{className:"cardBody"},"\u05e9\u05dd \u05de\u05e9\u05e4\u05d7\u05d4: ",m.state.fName.trim()," "),r.a.createElement(y.a.Body,{className:"cardBody"},"\u05ea\u05d0\u05e8\u05d9\u05da \u05dc\u05d9\u05d3\u05d4: ",m.state.x[n])))},n=0;n<a;n++)u();this.setState({text:h}),this.togglePopup()}case 47:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){a(86);var e=(new Date).toISOString().split("T")[0];return r.a.createElement("div",null,r.a.createElement("datalist",{id:"first-list"},this.state.optionsPName),r.a.createElement("datalist",{id:"last-list"},this.state.optionsLName),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"search"},r.a.createElement("label",{className:"lSearch"},"\u05d7\u05e4\u05e9 \u05de\u05d8\u05d5\u05e4\u05dc:"),r.a.createElement("input",{className:"iSearch",id:"pname",type:"text",name:"pName",value:this.state.pName,placeholder:"\u05e9\u05dd \u05e4\u05e8\u05d8\u05d9",onChange:this.handleChange,list:"first-list",required:!0}),r.a.createElement("input",{className:"iSearch",id:"fname",type:"text",name:"fName",value:this.state.fName,placeholder:"\u05e9\u05dd \u05de\u05e9\u05e4\u05d7\u05d4",onChange:this.handleChange,list:"last-list",required:!0}),r.a.createElement("button",{className:"bSearch"},"\u05d7\u05e4\u05e9")),r.a.createElement("div",{className:"dates"},r.a.createElement("label",{className:"cSearch"},"\u05d1\u05d7\u05e8 \u05ea\u05d0\u05e8\u05d9\u05db\u05d9\u05dd: \u05de"),r.a.createElement("input",{className:"dSearch",type:"date",name:"start_date",value:this.state.start_date,onChange:this.handleChange,max:this.state.end_date}),r.a.createElement("label",{className:"aSearch"},"\u05e2\u05d3"),r.a.createElement("input",{className:"dSearch",type:"date",name:"end_date",value:this.state.end_date,onChange:this.handleChange,max:e})),r.a.createElement("div",{className:"mdd"},r.a.createElement("label",{className:"mLabel"},"\u05d1\u05d7\u05e8 \u05de\u05d3\u05d3\u05d9\u05dd:"),r.a.createElement("input",{className:"cInput",type:"checkbox",name:"steps",checked:this.state.steps,onChange:this.handleChange}),r.a.createElement("label",{className:"mLabel"},"\u05e6\u05e2\u05d3\u05d9\u05dd"),r.a.createElement("input",{className:"cInput",type:"checkbox",name:"distance",checked:this.state.distance,onChange:this.handleChange}),r.a.createElement("label",{className:"mLabel"},"\u05de\u05e8\u05d7\u05e7"),r.a.createElement("input",{className:"cInput",type:"checkbox",name:"weather",checked:this.state.weather,onChange:this.handleChange}),r.a.createElement("label",{className:"mLabel"},"\u05de\u05d6\u05d2 \u05d4\u05d0\u05d5\u05d5\u05d9\u05e8"),r.a.createElement("input",{className:"cInput",type:"checkbox",name:"calories",checked:this.state.calories,onChange:this.handleChange}),r.a.createElement("label",{className:"mLabel"},"\u05e7\u05dc\u05d5\u05e8\u05d9\u05d5\u05ea"),r.a.createElement("input",{className:"cInput",type:"checkbox",name:"sleeping_hours",checked:this.state.sleeping_hours,onChange:this.handleChange}),r.a.createElement("label",{className:"mLabel"},"\u05e9\u05e2\u05d5\u05ea \u05e9\u05d9\u05e0\u05d4"),r.a.createElement("input",{className:"cInput",type:"checkbox",name:"dailyQ",checked:this.state.dailyQ,onChange:this.handleChange}),r.a.createElement("label",{className:"mLabel"},"\u05e9\u05d0\u05dc\u05d5\u05df \u05d9\u05d5\u05de\u05d9"),r.a.createElement("input",{className:"cInput",type:"checkbox",name:"perQ",checked:this.state.perQ,onChange:this.handleChange}),r.a.createElement("label",{className:"mLabel"},"\u05e9\u05d0\u05dc\u05d5\u05e0\u05d9\u05dd \u05ea\u05e7\u05d5\u05e4\u05ea\u05d9\u05d9\u05dd")),r.a.createElement("div",{className:"mddShow"},r.a.createElement("label",{className:"mLabel"},"\u05d1\u05d7\u05e8 \u05d0\u05d5\u05e4\u05df \u05d4\u05e6\u05d2\u05d4:"),r.a.createElement("input",{className:"cInput",type:"checkbox",name:"showDaily",checked:this.state.showDaily,onChange:this.handleChange}),r.a.createElement("label",{className:"mLabel"},"\u05d9\u05d5\u05de\u05d9"),r.a.createElement("input",{className:"cInput",type:"checkbox",name:"weekly",checked:this.state.weekly,onChange:this.handleChange}),r.a.createElement("label",{className:"mLabel"},"\u05e9\u05d1\u05d5\u05e2\u05d9"),r.a.createElement("input",{className:"cInput",type:"checkbox",name:"monthly",checked:this.state.monthly,onChange:this.handleChange}),r.a.createElement("label",{className:"mLabel"},"\u05d7\u05d5\u05d3\u05e9\u05d9"))),r.a.createElement("br",null),r.a.createElement(L,{dataArr:this.state.dataArr,steps:this.state.steps,distance:this.state.distance,calories:this.state.calories,weather:this.state.weather,sleep:this.state.sleeping_hours,dailyA:this.state.dailyA,periodicAnswers:this.state.periodicAnswers,dailyQ:this.state.dailyQ,perQ:this.state.perQ,date:this.state.date,showDaily:this.state.showDaily,weekly:this.state.weekly,monthly:this.state.monthly,user:this.state.user,name:this.state.pName.trim()+" "+this.state.fName.trim(),ready:this.state.ready}),this.state.showPopup?r.a.createElement(B,{text:this.state.text,closePopup:this.togglePopup.bind(this)}):null)}}]),s}(s.Component),B=function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"popup"},r.a.createElement("div",{className:"popup_inner"},r.a.createElement("button",{onClick:this.props.closePopup,id:"x"},"x"),r.a.createElement("h4",null,":\u05d0\u05e0\u05d0 \u05d1\u05d7\u05e8 \u05de\u05d1\u05d9\u05df \u05d4\u05e8\u05e9\u05d5\u05de\u05d5\u05ea \u05d4\u05d1\u05d0\u05d5\u05ea"),this.props.text))}}]),a}(r.a.Component),q=function(e){Object(c.a)(s,e);var t=Object(p.a)(s);function s(e){var a;return Object(o.a)(this,s),(a=t.call(this,e)).state={showPopup:!1,pass:"",pass2:"",diff:!1},a.logout=a.logout.bind(Object(g.a)(a)),a.change=a.change.bind(Object(g.a)(a)),a.togglePopup=a.togglePopup.bind(Object(g.a)(a)),a.handleChange=a.handleChange.bind(Object(g.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(g.a)(a)),a}return Object(i.a)(s,[{key:"togglePopup",value:function(){this.setState({showPopup:!this.state.showPopup})}},{key:"handleSubmit",value:function(){var e=Object(b.a)(f.a.mark((function e(t){var a,s,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),this.state.pass===this.state.pass2){e.next=5;break}this.setState({diff:!0}),e.next=15;break;case 5:return a="https://icc.ise.bgu.ac.il/njsw03auth/usersAll/askChangePassword",e.next=8,E.a.post(a,{},{headers:{"Content-Type":"application/json","x-auth-token":sessionStorage.getItem("token")}});case 8:return r=e.sent,s=r.data.data,a="https://icc.ise.bgu.ac.il/njsw03users/passwordChangeCheck/changePassword",e.next=13,E.a.post(a,{NewPassword:this.state.pass},{headers:{"Content-Type":"application/json","x-auth-token":s}});case 13:e.sent.data.message&&(window.alert("\u05d4\u05e1\u05d9\u05e1\u05de\u05d0 \u05e9\u05d5\u05e0\u05ea\u05d4 \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4"),this.togglePopup());case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){var t=e.target,a=t.name,s=t.value,r=t.type,n=t.checked;"checkbox"===r?this.setState(Object(m.a)({},a,n)):this.setState(Object(m.a)({},a,s))}},{key:"logout",value:function(){sessionStorage.removeItem("token"),sessionStorage.removeItem("type"),sessionStorage.removeItem("name"),sessionStorage.removeItem("doctor"),localStorage.removeItem("token"),localStorage.removeItem("type"),localStorage.removeItem("name"),localStorage.removeItem("doctor"),window.location.reload(!1)}},{key:"change",value:function(){this.togglePopup()}},{key:"render",value:function(){var e=this;return a(44),r.a.createElement("div",null,r.a.createElement("div",{id:"labels"},r.a.createElement("label",{id:"logout",onClick:function(){return e.logout()}},"\u05d4\u05ea\u05e0\u05ea\u05e7"),r.a.createElement("label",{id:"sep",onClick:function(){return e.change()}}," |"),r.a.createElement("label",{id:"change",onClick:function(){return e.change()}},"\u05e9\u05e0\u05d4 \u05e1\u05d9\u05e1\u05de\u05d0"),r.a.createElement("label",{id:"hello"},'\u05e9\u05dc\u05d5\u05dd \u05d3"\u05e8 ',sessionStorage.getItem("name")," ")),r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement(D,null),r.a.createElement(P,null),r.a.createElement("br",null),"true"!==sessionStorage.getItem("doctor")?r.a.createElement(u.a,{to:"/"}):null)),this.state.showPopup?r.a.createElement(V,{change:this.handleChange.bind(this),closePopup:this.togglePopup.bind(this),handleSubmit:this.handleSubmit.bind(this),diff:this.state.diff}):null)}}]),s}(s.Component),V=function(e){Object(c.a)(s,e);var t=Object(p.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(i.a)(s,[{key:"render",value:function(){return a(44),r.a.createElement("div",{className:"popup"},r.a.createElement("div",{className:"popup_inner"},r.a.createElement("button",{onClick:this.props.closePopup,id:"x"},"x"),r.a.createElement("h3",{id:"h3"},"\u05d4\u05d7\u05dc\u05e4\u05ea \u05e1\u05d9\u05e1\u05de\u05d0"),r.a.createElement("form",{onSubmit:this.props.handleSubmit},r.a.createElement("div",{className:"lineC"},r.a.createElement("label",null,"\u05e1\u05d9\u05e1\u05de\u05d0 \u05d7\u05d3\u05e9\u05d4:")),r.a.createElement("div",{className:"lineC"},r.a.createElement("input",{type:"password",name:"pass",id:"pass",onChange:this.props.change,required:!0})),r.a.createElement("div",{className:"lineC"},r.a.createElement("label",null,"\u05d4\u05e7\u05dc\u05d3 \u05d0\u05ea \u05d4\u05e1\u05d9\u05e1\u05de\u05d0 \u05de\u05d7\u05d3\u05e9:")),r.a.createElement("div",{className:"lineC"},r.a.createElement("input",{type:"password",name:"pass2",id:"pass2",onChange:this.props.change,required:!0})),r.a.createElement("div",{className:"lineC"},this.props.diff?r.a.createElement("label",{id:"diffPass"},"\u05d4\u05e1\u05d9\u05e1\u05de\u05d0\u05d5\u05ea \u05e9\u05d5\u05e0\u05d5\u05ea"):null),r.a.createElement("div",{className:"lineC"},r.a.createElement("input",{type:"submit",value:"\u05e9\u05dc\u05d7"})))))}}]),s}(r.a.Component),G=(a(91),a(46),{userName:"",fName:"",lName:"",password:"",bday:new Date,email:"",questionsID:[],questionsText:[],questions:[],answerUserQuestion:"",selectedUserType:"patient",quesionChosen:0}),U=function(e){Object(c.a)(s,e);var t=Object(p.a)(s);function s(e){var a;return Object(o.a)(this,s),(a=t.call(this,e)).state={userName:"",fName:"",lName:"",password:"",bday:"new Date()",phone:"",questionsID:[],questionsText:[],questions:[],answerUserQuestion:"",selectedUserType:"patient",code:"",quesionChosen:0},a.handleChange=a.handleChange.bind(Object(g.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(g.a)(a)),a.handleReset=a.handleReset.bind(Object(g.a)(a)),a.onSelect=a.onSelect.bind(Object(g.a)(a)),a}return Object(i.a)(s,[{key:"onSelect",value:function(e){var t=e.target.options.selectedIndex;this.setState({quesionChosen:t})}},{key:"componentDidMount",value:function(){var e=this,t=[],a=[],s=[];fetch("https://icc.ise.bgu.ac.il/njsw03users/getVerifications").then((function(e){return e.json()})).then((function(r){t=r.data;for(var n=0;n<t.length;n++){var l=t[n];a.push(l.QuestionID),s.push(l.QuestionText)}e.setState({questionsID:a,questionsText:s,questions:t})}))}},{key:"handleChange",value:function(e){this.setState(Object(m.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=new Date(this.state.bday),a=new Date;E.a.post("https://icc.ise.bgu.ac.il/njsw03users/doctorRegister",{UserID:this.state.userName,Password:this.state.password,First_Name:this.state.fName,Last_Name:this.state.lName,Phone_Number:this.state.phone,BirthDate:t.getTime(),Code:this.state.code,VerificationQuestion:this.state.quesionChosen,VerificationAnswer:this.state.answerUserQuestion,ValidTime:a.getTime()}).then((function(e){"Wrong Code"===e.data.message?window.alert("\u05e7\u05d5\u05d3 \u05d4\u05d0\u05d9\u05de\u05d5\u05ea \u05d0\u05d9\u05e0\u05d5 \u05e0\u05db\u05d5\u05df"):"Taken Email"===e.data.message?window.alert("\u05db\u05ea\u05d5\u05d1\u05ea \u05d4\u05d3\u05d5\u05d0\u05dc \u05db\u05d1\u05e8 \u05e8\u05e9\u05d5\u05de\u05d4 \u05d1\u05de\u05e2\u05e8\u05db\u05ea"):(window.alert("\u05d4\u05d4\u05e8\u05e9\u05de\u05d4 \u05d1\u05d5\u05e6\u05e2\u05d4 \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4 \u05e0\u05d0 \u05dc\u05d1\u05e6\u05e2 \u05d4\u05ea\u05d7\u05d1\u05e8\u05d5\u05ea"),window.location.reload(!1))}))}},{key:"handleReset",value:function(e){var t=this;this.setState(G);var a=[],s=[],r=[];fetch("https://icc.ise.bgu.ac.il/njsw03users/getVerifications").then((function(e){return e.json()})).then((function(e){a=e.data,console.log(a);for(var n=0;n<a.length;n++){var l=a[n];s.push(l.QuestionID),r.push(l.QuestionText)}t.setState({questionsID:s,questionsText:r,questions:a})}))}},{key:"render",value:function(){var e=this;a(92);var t=this.state.questionsText.map((function(e){return r.a.createElement("option",{key:e},e)})),s=(new Date).toISOString().split("T")[0];return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleSubmit,onReset:this.handleReset,id:"new_user_form"},r.a.createElement("div",{className:"divs_in_add"},r.a.createElement("label",{className:"labels_in_add_user"},'\u05db\u05ea\u05d5\u05d1\u05ea \u05d3\u05d5\u05d0"\u05dc'),r.a.createElement("input",{className:"inputs_in_add_user",name:"userName",type:"text",value:this.state.userName,onChange:function(t){return e.handleChange(t)},required:!0})),r.a.createElement("div",{className:"divs_in_add"},r.a.createElement("label",{className:"labels_in_add_user"},"\u05e9\u05dd \u05e4\u05e8\u05d8\u05d9"),r.a.createElement("input",{className:"inputs_in_add_user",name:"fName",type:"text",value:this.state.fName,onChange:this.handleChange,required:!0})),r.a.createElement("div",{className:"divs_in_add"},r.a.createElement("label",{className:"labels_in_add_user"},"\u05e9\u05dd \u05de\u05e9\u05e4\u05d7\u05d4 "),r.a.createElement("input",{className:"inputs_in_add_user",name:"lName",type:"text",value:this.state.lName,onChange:this.handleChange,required:!0})),r.a.createElement("div",{className:"divs_in_add"},r.a.createElement("label",{className:"labels_in_add_user"},"\u05e1\u05d9\u05e1\u05de\u05d4 "),r.a.createElement("input",{className:"inputs_in_add_user",name:"password",type:"password",value:this.state.password,onChange:this.handleChange,required:!0})),r.a.createElement("div",{className:"divs_in_add"},r.a.createElement("label",{className:"labels_in_add_user"},"\u05de\u05e1\u05e4\u05e8 \u05d8\u05dc\u05e4\u05d5\u05df"),r.a.createElement("input",{className:"inputs_in_add_user",name:"phone",type:"tel",id:"phone",pattern:"[0-9]{10}",value:this.state.phone,onChange:this.handleChange,required:!0})),r.a.createElement("div",{className:"divs_in_add"},r.a.createElement("label",{className:"labels_in_add_user"},"\u05ea\u05d0\u05e8\u05d9\u05da \u05dc\u05d9\u05d3\u05d4"),r.a.createElement("input",{className:"inputs_in_add_user",name:"bday",type:"date",max:s,value:this.state.bday,onChange:this.handleChange,required:!0})),r.a.createElement("div",{className:"divs_in_add"},r.a.createElement("label",{className:"labels_in_add_user"},"\u05e7\u05d5\u05d3 \u05d0\u05d9\u05de\u05d5\u05ea "),r.a.createElement("input",{className:"inputs_in_add_user",name:"code",type:"text",value:this.state.code,onChange:this.handleChange,required:!0})),r.a.createElement("div",{className:"divs_in_add"},r.a.createElement("label",{className:"labels_in_add_user"},"\u05e9\u05d0\u05dc\u05ea \u05d0\u05d9\u05de\u05d5\u05ea "),r.a.createElement("select",{className:"select_in_add_user",onChange:this.onSelect},t)),r.a.createElement("div",{className:"divs_in_add"},r.a.createElement("label",{className:"labels_in_add_user"},"\u05ea\u05e9\u05d5\u05d1\u05d4 "),r.a.createElement("input",{className:"inputs_in_add_user",name:"answerUserQuestion",type:"text",value:this.state.answerUserQuestion,onChange:this.handleChange,required:!0})),r.a.createElement("div",{className:"divs_in_add"},r.a.createElement("input",{type:"submit",value:"\u05d4\u05d9\u05e8\u05e9\u05dd",className:"submit_and_reset_buttons"}))))}}]),s}(s.Component),H=function(e){Object(c.a)(s,e);var t=Object(p.a)(s);function s(e){var a;return Object(o.a)(this,s),(a=t.call(this,e)).state={ID:"",password:"",wrong:!1,showPopup:!1,name:"",doctor:!1,showID:!1,showWrongUser:!1,showQ:!1,showChange:!1,id:"",question:"",answer:"",date:"",wrongA:!1,diff:!1,token:"",pass:"",pass2:"",remember:!1,register:!1},localStorage.getItem("doctor")&&(sessionStorage.setItem("token",localStorage.getItem("token")),sessionStorage.setItem("name",localStorage.getItem("name")),sessionStorage.setItem("type",localStorage.getItem("type")),sessionStorage.setItem("doctor",localStorage.getItem("doctor"))),a.change=a.change.bind(Object(g.a)(a)),a.sumbit=a.sumbit.bind(Object(g.a)(a)),a.togglePopup=a.togglePopup.bind(Object(g.a)(a)),a.forget=a.forget.bind(Object(g.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(g.a)(a)),a.handle=a.handle.bind(Object(g.a)(a)),a.changePass=a.changePass.bind(Object(g.a)(a)),a.register=a.register.bind(Object(g.a)(a)),a}return Object(i.a)(s,[{key:"change",value:function(e){this.setState(Object(m.a)({},e.target.name,e.target.value))}},{key:"togglePopup",value:function(){this.setState({showPopup:!this.state.showPopup,wrongA:!1,diff:!1})}},{key:"forget",value:function(e){e.preventDefault(),this.setState({showID:!0,showWrongUser:!1,showQ:!1,showChange:!1,register:!1}),this.togglePopup()}},{key:"handleSubmit",value:function(){var e=Object(b.a)(f.a.mark((function e(t){var a,s,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),"https://icc.ise.bgu.ac.il/njsw03users/forgotPassword",e.next=4,E.a.post("https://icc.ise.bgu.ac.il/njsw03users/forgotPassword",{UserID:this.state.id});case 4:if(null!==(a=e.sent).data.data){e.next=9;break}this.setState({wrongA:!0}),e.next=14;break;case 9:return s=a.data.data,e.next=12,E.a.get("https://icc.ise.bgu.ac.il/njsw03users/getVerificationQuestion?QuestionID="+s);case 12:r=e.sent,this.setState({showID:!1,showWrongUser:!1,showQ:!0,showChange:!1,register:!1,wrongA:!1,question:r.data.data.QuestionText});case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handle",value:function(){var e=Object(b.a)(f.a.mark((function e(t){var a,s,r,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=new Date(this.state.date),s=a.getTime(),"https://icc.ise.bgu.ac.il/njsw03users/checkVerification",e.next=6,E.a.post("https://icc.ise.bgu.ac.il/njsw03users/checkVerification",{UserID:this.state.id,VerificationAnswer:this.state.answer,BirthDate:s});case 6:r=e.sent,(n=r.data.data)?this.setState({showID:!1,showWrongUser:!1,showQ:!1,showChange:!0,register:!1,token:n}):this.setState({wrongA:!0});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"changePass",value:function(){var e=Object(b.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),this.state.pass===this.state.pass2){e.next=5;break}this.setState({diff:!0}),e.next=11;break;case 5:return a=this.state.token,"https://icc.ise.bgu.ac.il/njsw03users/passwordChangeCheck/changePassword",e.next=9,E.a.post("https://icc.ise.bgu.ac.il/njsw03users/passwordChangeCheck/changePassword",{NewPassword:this.state.pass},{headers:{"Content-Type":"application/json","x-auth-token":a}});case 9:e.sent.data.message&&(window.alert("\u05d4\u05e1\u05d9\u05e1\u05de\u05d0 \u05e9\u05d5\u05e0\u05ea\u05d4 \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4"),this.togglePopup());case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"register",value:function(e){this.setState({register:!0,showID:!1,showWrongUser:!1,showQ:!1,showChange:!1}),this.togglePopup()}},{key:"sumbit",value:function(e){var t=this;e.preventDefault(),E.a.post("https://icc.ise.bgu.ac.il/njsw03users/login",{UserID:this.state.ID,Password:this.state.password}).then((function(e){null==e.data.data?t.setState({wrong:!0}):"patient"===e.data.data.type[0]?(t.setState({name:e.data.data.name,ID:"",password:"",wrong:!1,showID:!1,showWrongUser:!0,showQ:!1,showChange:!1,register:!1}),t.togglePopup()):(sessionStorage.setItem("token",e.data.data.token),sessionStorage.setItem("name",e.data.data.name),sessionStorage.setItem("type",e.data.data.type),t.setState({doctor:sessionStorage.getItem("type").includes("doctor")}),sessionStorage.setItem("doctor",t.state.doctor),window.location.reload(!1),t.state.remember&&(localStorage.setItem("token",e.data.data.token),localStorage.setItem("name",e.data.data.name),localStorage.setItem("type",e.data.data.type),localStorage.setItem("doctor",t.state.doctor)))}))}},{key:"render",value:function(){var e=this;return a(46),r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(t){return e.sumbit(t)}},r.a.createElement("label",null,'\u05db\u05ea\u05d5\u05d1\u05ea \u05d3\u05d5\u05d0"\u05dc:'),r.a.createElement("input",{type:"text",className:"inputs",name:"ID",onChange:function(t){return e.change(t)},value:this.state.ID,required:!0}),r.a.createElement("label",null,"\u05e1\u05d9\u05e1\u05de\u05d4:"),r.a.createElement("input",{type:"password",className:"inputs",name:"password",onChange:function(t){return e.change(t)},value:this.state.password,required:!0}),this.state.wrong?r.a.createElement("label",{id:"wrong"},'\u05db\u05ea\u05d5\u05d1\u05ea \u05d4\u05d3\u05d5\u05d0"\u05dc \u05d0\u05d5 \u05d4\u05e1\u05d9\u05e1\u05de\u05d4 \u05dc\u05d0 \u05e0\u05db\u05d5\u05e0\u05d9\u05dd'):r.a.createElement("label",null),r.a.createElement("input",{type:"checkbox",id:"remember",name:"remember",onChange:function(t){return e.change(t)},value:this.state.remember}),r.a.createElement("label",null,"\u05d6\u05db\u05d5\u05e8 \u05d0\u05d5\u05ea\u05d9"),r.a.createElement("button",{type:"submit"},"\u05d4\u05ea\u05d7\u05d1\u05e8"),r.a.createElement("label",{id:"forget",onClick:function(t){return e.forget(t)}},"\u05e9\u05db\u05d7\u05ea \u05e1\u05d9\u05e1\u05de\u05d4?"),r.a.createElement("label",{id:"register",onClick:function(t){return e.register(t)}},"\u05d4\u05d9\u05e8\u05e9\u05dd")),sessionStorage.doctor?r.a.createElement(u.a,{to:"/search"}):null,this.state.showPopup?r.a.createElement(M,{text:this.state.name,closePopup:this.togglePopup.bind(this),showID:this.state.showID,showWrongUser:this.state.showWrongUser,showQ:this.state.showQ,showChange:this.state.showChange,handleSubmit:this.handleSubmit.bind(this),change:this.change.bind(this),handle:this.handle.bind(this),question:this.state.question,wrongA:this.state.wrongA,diff:this.state.diff,changePass:this.changePass.bind(this),register:this.state.register}):null)}}]),s}(s.Component),M=function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=(new Date).toISOString().split("T")[0];return r.a.createElement("div",null,this.props.showWrongUser?r.a.createElement("div",{className:"popup"},r.a.createElement("div",{className:"popup_innerWrong"},r.a.createElement("button",{onClick:this.props.closePopup,id:"x"},"x"),r.a.createElement("h3",null,",\u05e9\u05dc\u05d5\u05dd ",this.props.text),r.a.createElement("p",{id:"wrongType"}," \u05d0\u05d9\u05df \u05dc\u05da \u05d0\u05ea \u05d4\u05d4\u05e8\u05e9\u05d0\u05d5\u05ea \u05d4\u05de\u05ea\u05d0\u05d9\u05de\u05d5\u05ea \u05e2\u05dc \u05de\u05e0\u05ea \u05dc\u05d4\u05d9\u05db\u05e0\u05e1 \u05dc\u05d0\u05ea\u05e8"))):null,this.props.showID?r.a.createElement("div",{className:"popup"},r.a.createElement("div",{className:"popup_innerEmail"},r.a.createElement("button",{onClick:this.props.closePopup,id:"x"},"x"),r.a.createElement("h3",{id:"h3"},"\u05e9\u05db\u05d7\u05ea\u05d9 \u05e1\u05d9\u05e1\u05de\u05d0"),r.a.createElement("form",{onSubmit:this.props.handleSubmit},r.a.createElement("label",{id:"lid"},'\u05d0\u05e0\u05d0 \u05d4\u05d6\u05df \u05db\u05ea\u05d5\u05d1\u05ea \u05d3\u05d5\u05d0"\u05dc:'),r.a.createElement("input",{type:"text",className:"inputs",name:"id",id:"id",onChange:this.props.change,required:!0}),this.props.wrongA?r.a.createElement("label",{className:"error"},'\u05db\u05ea\u05d5\u05d1\u05ea \u05d3\u05d5\u05d0"\u05dc \u05dc\u05d0 \u05e7\u05d9\u05d9\u05de\u05ea'):null,r.a.createElement("div",{className:"lineC"},r.a.createElement("input",{type:"submit",value:"\u05d4\u05de\u05e9\u05da",id:"con"}))))):null,this.props.showQ?r.a.createElement("div",{className:"popup"},r.a.createElement("div",{className:"popup_innerEmail"},r.a.createElement("button",{onClick:this.props.closePopup,id:"x"},"x"),r.a.createElement("h3",{id:"h3"},"\u05e9\u05db\u05d7\u05ea\u05d9 \u05e1\u05d9\u05e1\u05de\u05d0"),r.a.createElement("form",{onSubmit:this.props.handle},r.a.createElement("div",{className:"lineC"},r.a.createElement("label",{id:"lq"},this.props.question)),r.a.createElement("div",{className:"lineC"},r.a.createElement("input",{type:"text",name:"answer",id:"answer",onChange:this.props.change,required:!0})),r.a.createElement("div",{className:"lineC"},r.a.createElement("label",{id:"ldate"},"\u05d4\u05db\u05e0\u05e1 \u05d0\u05ea \u05ea\u05d0\u05e8\u05d9\u05da \u05d9\u05d5\u05dd \u05d4\u05d5\u05dc\u05d3\u05ea \u05e9\u05dc\u05da:")),r.a.createElement("div",{className:"lineC"},r.a.createElement("input",{type:"date",name:"date",id:"date",max:e,onChange:this.props.change,required:!0})),r.a.createElement("div",{className:"lineC"},this.props.wrongA?r.a.createElement("label",{className:"error"},"\u05e9\u05d0\u05dc\u05ea \u05d0\u05d9\u05de\u05d5\u05ea \u05dc\u05d0 \u05e0\u05db\u05d5\u05e0\u05d4 \u05d0\u05d5 \u05ea\u05d0\u05e8\u05d9\u05da \u05dc\u05d9\u05d3\u05d4 \u05e9\u05d2\u05d5\u05d9"):null),r.a.createElement("div",{className:"lineC"},r.a.createElement("input",{type:"submit",value:"\u05d4\u05de\u05e9\u05da",id:"con"}))))):null,this.props.showChange?r.a.createElement("div",{className:"popup"},r.a.createElement("div",{className:"popup_innerEmail"},r.a.createElement("button",{onClick:this.props.closePopup,id:"x"},"x"),r.a.createElement("h3",{id:"h3"},"\u05e9\u05db\u05d7\u05ea\u05d9 \u05e1\u05d9\u05e1\u05de\u05d0"),r.a.createElement("form",{onSubmit:this.props.changePass},r.a.createElement("label",{id:"lpass"},"\u05e1\u05d9\u05e1\u05de\u05d0 \u05d7\u05d3\u05e9\u05d4:"),r.a.createElement("input",{type:"password",className:"inputs",name:"pass",id:"pass",onChange:this.props.change,required:!0}),r.a.createElement("label",{id:"lpass2"},"\u05d4\u05e7\u05dc\u05d3 \u05d0\u05ea \u05d4\u05e1\u05d9\u05e1\u05de\u05d0 \u05de\u05d7\u05d3\u05e9:"),r.a.createElement("input",{type:"password",className:"inputs",name:"pass2",id:"pass2",onChange:this.props.change,required:!0}),this.props.diff?r.a.createElement("label",{className:"error"},"\u05d4\u05e1\u05d9\u05e1\u05de\u05d0\u05d5\u05ea \u05e9\u05d5\u05e0\u05d5\u05ea"):null,r.a.createElement("input",{type:"submit",value:"\u05e9\u05dc\u05d7",id:"send"})))):null,this.props.register?r.a.createElement("div",{className:"popup"},r.a.createElement("div",{className:"popup_innerAdd"},r.a.createElement("button",{onClick:this.props.closePopup,id:"x"},"x"),r.a.createElement("h3",null,"\u05d4\u05e8\u05e9\u05de\u05d4"),r.a.createElement(U,null))):null)}}]),a}(r.a.Component),R=function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"Home"},r.a.createElement("header",{className:"Home-header"},r.a.createElement(D,null),r.a.createElement(H,null))))}}]),a}(s.Component),W=function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(h.a,{basename:window.location.pathname||""},r.a.createElement(u.d,null,r.a.createElement(u.b,{exact:!0,path:"/"},r.a.createElement(R,null)),r.a.createElement(u.b,{path:"/search"},r.a.createElement(q,null))))}}]),a}(s.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[51,1,2]]]);
//# sourceMappingURL=main.7d1f223b.chunk.js.map